<!DOCTYPE html>
<html lang="zh">
	<head>
		<link href="http://gmpg.org/xfn/11" rel="profile">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta http-equiv="content-type" content="text/html; charset=utf-8">

		<!-- Enable responsiveness on mobile devices-->
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

		<title>Tech Rain - Articles by Inndy</title>

		<!-- CSS -->
		<link href="//fonts.googleapis.com/" rel="dns-prefetch">
		<link href="//fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic|Abril+Fatface|PT+Sans:400,400italic,700&amp;subset=latin,latin-ext" rel="stylesheet">

		<link rel="stylesheet" href="/theme/css/poole.css" />
		<link rel="stylesheet" href="/theme/css/hyde.css" />
		<link rel="stylesheet" href="/theme/css/syntax.css" />
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">

		<!-- RSS -->
		<link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
	</head>

	<body class="theme-base-0d">
<div class="sidebar">
	<div class="container sidebar-sticky">
		<div class="sidebar-about">

			<h1>
				<a href="/">
					<img class="profile-picture" src="https://gravatar.com/avatar/26cdb92aafb2b2e6c8972edebda4bd17?s=360">
					Tech Rain
				</a>
			</h1>
                <h4>技術需要雨水滋潤才能成長茁壯</h4>
			<p class="lead"></p>
			<p class="lead">It's Inndy speaking. </p>
			<p></p>
		</div>
		<nav class="sidebar-nav">
					<a class="sidebar-nav-item" href="https://github.com/Inndy">
						<i class="fa fa-github"></i>
					</a>
					<a class="sidebar-nav-item" href="https://twitter.com/Inndy_tw">
						<i class="fa fa-twitter"></i>
					</a>
			<a class="sidebar-nav-item" href="">
				<i class="fa fa-feed"></i>
			</a>
		</nav>
	</div>
</div>		<div class="content container">
	<div class="posts">
			<div class="post">
				<h1 class="post-title" href="/smtp-credential-leakage.html#smtp-credential-leakage">
					<a href="/smtp-credential-leakage.html#smtp-credential-leakage">某學校 SMTP 洩漏事件</a>
				</h1>
				<span class="post-date">四 22 9月 2016</span>
				<p>
					
				</p>
				<a class="read-more" href="smtp-credential-leakage.html">Continue reading »</a>
			</div>
			<div class="post">
				<h1 class="post-title" href="/vmp-unpacking.html#vmp-unpacking">
					<a href="/vmp-unpacking.html#vmp-unpacking">VMProtect 弱保護脫殼小記</a>
				</h1>
				<span class="post-date">日 18 9月 2016</span>
				<p>
					<p>最近開始玩某個遊戲的私服，世界各國代理商全倒光之後就有一群人在臺港澳中開了私服，甚至就直接用那個遊戲的名字直接營運.... XD</p>
<p>遊戲主程式有加殼，因為有改過所以沒辦法直接從 section name 或是 exeinfoPE 看出來，後來是 ProtectionId 說他是 VMProtect 2.06（我沒辦法驗證這件事情，基本上他沒開任何 VMProtect 的保護功能）</p>
<p>一開始不知道怎麼脫，x64dbg 配 Win10 的環境也不太好作業，所以就在遊戲跑起來的狀況下 dump memory 然後修 IAT，結果 Win10 因為相容性問題，所以引入了 AcLayers.dll / apphelp.dll ，並且在 PE loader 內去 hook EAT，結果就會讓 Scylla 壞掉</p>
<p><img alt="" src="http://i.imgur.com/z21L8Ky.png" />
<img alt="" src="http://i.imgur.com/FCfmayt.png" /></p>
<p>脫殼請在該應用程式支援的最低作業系統版本下進行 XD ...</p>
				</p>
				<a class="read-more" href="vmp-unpacking.html">Continue reading »</a>
			</div>
			<div class="post">
				<h1 class="post-title" href="/prng.html#prng">
					<a href="/prng.html#prng">PRNG之亂</a>
				</h1>
				<span class="post-date">日 08 5月 2016</span>
				<p>
					
				</p>
				<a class="read-more" href="prng.html">Continue reading »</a>
			</div>
			<div class="post">
				<h1 class="post-title" href="/ssh-tunnel-note.html#ssh-tunnel-note">
					<a href="/ssh-tunnel-note.html#ssh-tunnel-note">SSH tunnel 筆記</a>
				</h1>
				<span class="post-date">五 26 2月 2016</span>
				<p>
					<p>SSH Tunnel 有<strong>三種</strong>工作模式，使用 ssh tunnnel 的好處有：</p>
<ul>
<li>在可能被監聽的網路環境保護未加密連線的安全</li>
<li>翻牆</li>
<li>一定程度上取代 VPN，是一個比較 light-weight 的解決方案</li>
</ul>
<h2>先定義兩個名詞：</h2>
<ul>
<li>local: ssh client</li>
<li>remote: ssh server</li>
</ul>
<h3>在 local listen port A，透過 remote forward 到 host B 的 port C</h3>
<p><code>ssh user@host -L [local_bind_address:]local_port_A:host_B:remote_port_C</code></p>
<p>example:</p>
<p><code>ssh user@host -L ...</code></p>
				</p>
				<a class="read-more" href="ssh-tunnel-note.html">Continue reading »</a>
			</div>
			<div class="post">
				<h1 class="post-title" href="/spent-two-hours-to-fix-a-bug-in-bottlepy.html#spent-two-hours-to-fix-a-bug-in-bottlepy">
					<a href="/spent-two-hours-to-fix-a-bug-in-bottlepy.html#spent-two-hours-to-fix-a-bug-in-bottlepy">花了兩個小時幫 bottle.py 修了一個 bug</a>
				</h1>
				<span class="post-date">六 06 2月 2016</span>
				<p>
					<p>真的很賭爛因為別人的 code 有 bug 讓自己花了超久的時間 debug</p>
<p>最近在寫一個 CTF 訓練平台，架構上採用 peewee + bottle.py 進行開發，因為不想花太多時間去學 Flask 和 Django 這種太龐大的架構（加上有些用法自己不見得喜歡），所以打算自幹整個架構</p>
<p>遇到了一個問題是我需要自訂 view 的路徑，翻了一下 code 之後發現我有 <code>template_lookup</code> 這個 keyword argument 可以用，但是不管怎麼嘗試，就是沒辦法讓 bottle.py 去我指定的 path 找 template file，不知道是不是我對 decorator 有誤解，改了老半天，後來又 trace 了一下 bottle.py ...</p>
				</p>
				<a class="read-more" href="spent-two-hours-to-fix-a-bug-in-bottlepy.html">Continue reading »</a>
			</div>
			<div class="post">
				<h1 class="post-title" href="/about-ctf-and-security-beginner.html#about-ctf-and-security-beginner">
					<a href="/about-ctf-and-security-beginner.html#about-ctf-and-security-beginner">談談資安、CTF，以及新手的困境</a>
				</h1>
				<span class="post-date">六 30 1月 2016</span>
				<p>
					
				</p>
				<a class="read-more" href="about-ctf-and-security-beginner.html">Continue reading »</a>
			</div>
			<div class="post">
				<h1 class="post-title" href="/online-game-cheating-and-law.html#online-game-cheating-and-law">
					<a href="/online-game-cheating-and-law.html#online-game-cheating-and-law">從法律面探討線上遊戲外掛</a>
				</h1>
				<span class="post-date">一 14 12月 2015</span>
				<p>
					<p>首先我們可以先讀一下刑法的妨害電腦使用罪</p>
<h3>《刑法》 第 三十六 章 妨害電腦使用罪</h3>
<table>
<thead>
<tr>
<th>#</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>358</td>
<td>無故輸入他人帳號密碼、破解使用電腦之保護措施或利用電腦系統之漏洞，而入侵他人之電腦或其相關設備者，處三年以下有期徒刑、拘役或科或併科十萬元以下罰金。</td>
</tr>
<tr>
<td>359</td>
<td>無故取得、刪除或變更他人電腦或其相關設備之電磁紀錄，致生損害於公眾或他人者，處五年以下有期徒刑、拘役或科或併科二十萬元以下罰金。</td>
</tr>
<tr>
<td>360</td>
<td>無故以電腦程式或其他電磁方式干擾他人電腦或其相關設備，致生損害於公眾或他人者，處三年以下有期徒刑、拘役或科或併科十萬元以下罰金。</td>
</tr>
<tr>
<td>361</td>
<td>對於公務機關之電腦或其相關設備犯前三條之罪者，加重其刑至二分之一。</td>
</tr>
<tr>
<td>362</td>
<td>製作專供犯本章之罪之電腦程式，而供自己或他人犯本章之罪，致生損害於公眾或他人者，處五年以下有期徒刑、拘役或科或併科二十萬元以下罰金。</td>
</tr>
<tr>
<td>363</td>
<td>第三百五十八條至第三百六十條之罪，須告訴乃論。</td>
</tr>
</tbody>
</table>
<p>接著我們可以列出一些跟線上遊戲相關的作弊手法或者犯罪來作討論</p>
<h4>自動練功 / 喝藥水</h4>
<p>基本上就是代替玩家完成日復一日的工作，放著讓電腦自己跑，技術上就是從遊戲讀取資訊（HP剩多少、玩家在哪裡、怪物在哪裡）然後輸入鍵盤或是滑鼠的操作（喝藥水、放攻擊、走位），從刑法面來看基本上沒有違法，但是可能違法玩家契約 ...</p>
				</p>
				<a class="read-more" href="online-game-cheating-and-law.html">Continue reading »</a>
			</div>
			<div class="post">
				<h1 class="post-title" href="/rctf-final-experience.html#rctf-final-experience">
					<a href="/rctf-final-experience.html#rctf-final-experience">RCTF Final 心得</a>
				</h1>
				<span class="post-date">一 14 12月 2015</span>
				<p>
					
				</p>
				<a class="read-more" href="rctf-final-experience.html">Continue reading »</a>
			</div>
			<div class="post">
				<h1 class="post-title" href="/concurrency-or-parallel.html#concurrency-or-parallel">
					<a href="/concurrency-or-parallel.html#concurrency-or-parallel">Concurrency? Parallel?</a>
				</h1>
				<span class="post-date">二 08 12月 2015</span>
				<p>
					<p>平行化處理大家應該都耳熟能詳，舉例來說 multi-threading 和 multi-processing 都屬於平行化（parallel），至於 parallel 的定義如下：</p>
<blockquote>
<p>在「同一個時間點」有「多個工作在執行」</p>
</blockquote>
<p>那麼 concurrency 呢？</p>
<blockquote>
<p>兩個工作起始到結束的時間區間有重疊</p>
</blockquote>
<p>舉例來說：我開了 10 個 thread 的網頁爬蟲去爬 PTT 表特版，這屬於 parallel，也屬於 concurrency</p>
<p>又或者：透過 <code>pthread</code> 函式庫用 C 語言實作的 merge sort ，屬於 parallel 也屬於 concurrency</p>
<p>但是 single thread 做 context-switch 則算是 concurrency</p>
<p>e ...</p>
				</p>
				<a class="read-more" href="concurrency-or-parallel.html">Continue reading »</a>
			</div>
			<div class="post">
				<h1 class="post-title" href="/ctf-introduction.html#ctf-introduction">
					<a href="/ctf-introduction.html#ctf-introduction">CTF介紹</a>
				</h1>
				<span class="post-date">四 17 9月 2015</span>
				<p>
					<p>一般人聽到 CTF 可能會有的反應大概就幾種：「那是什麼？」、「駭客的遊戲？聽起來好可怕」、「蛤？」，加上一個人打 CTF 太孤單，所以來寫這篇文章，向大家介紹 CTF！</p>
<h1>所以 CTF 到底是殺小？</h1>
<p>Capture The Flag，駭客的搶旗遊戲，<code>Flag</code> 通常就是一串文字，或是要達成指定的目標。</p>
<p>至於這個 <code>Flag</code> 要怎麼拿呢？基本上主辦方會架設一些有漏洞的服務系統，或者是含有漏洞的程式，又或者是把資訊隱藏在檔案裡面，挑戰者要想辦法用駭客攻擊的手法入侵系統，或者想辦法找出或解密藏在檔案或程式內隱藏的 <code>Flag</code></p>
<h1>CTF 的賽制</h1>
<p>基本上可以分成四種：</p>
<ul>
<li>Jeopardy</li>
<li>Attack &amp; Defense</li>
<li>King of Hill</li>
<li>(CGC)[http://www.cybergrandchallenge.com/]</li>
</ul>
<h2>Jeopardy</h2>
<p><img alt="AIS3 Final" src="http://i.imgur.com/Kunph0l.png" /></p>
<p>Jeopardy 會有多道題目可以解，題目常見類型如下 ...</p>
				</p>
				<a class="read-more" href="ctf-introduction.html">Continue reading »</a>
			</div>
			<div class="post">
				<h1 class="post-title" href="/cleanest-way-to-host-static-files-using-nodejs.html#cleanest-way-to-host-static-files-using-nodejs">
					<a href="/cleanest-way-to-host-static-files-using-nodejs.html#cleanest-way-to-host-static-files-using-nodejs">Cleanest way to host static files using nodejs</a>
				</h1>
				<span class="post-date">一 10 8月 2015</span>
				<p>
					<p>Use built-in <code>http</code> module and <code>ecstatic</code> for middleware.</p>
<p>First, install ecstatic</p>
<div class="highlight"><pre><span></span>npm install ecstatic
</pre></div>


<p>And the magic!</p>
<p>``` js serve.js
var http = require('http'),
    ecstatic = require('ecstatic');</p>
<p>http.createServer(ecstatic({root:'./'}))
    .listen(8080, '127.0.0.1');
```</p>
				</p>
				<a class="read-more" href="cleanest-way-to-host-static-files-using-nodejs.html">Continue reading »</a>
			</div>
			<div class="post">
				<h1 class="post-title" href="/fizzbuzz-test.html#fizzbuzz-test">
					<a href="/fizzbuzz-test.html#fizzbuzz-test">FizzBuzz Test</a>
				</h1>
				<span class="post-date">六 08 8月 2015</span>
				<p>
					
				</p>
				<a class="read-more" href="fizzbuzz-test.html">Continue reading »</a>
			</div>
			<div class="post">
				<h1 class="post-title" href="/happy-software-security-tips.html#happy-software-security-tips">
					<a href="/happy-software-security-tips.html#happy-software-security-tips">快樂版軟體安全小秘訣</a>
				</h1>
				<span class="post-date">三 01 4月 2015</span>
				<p>
					<h1>講個秘訣...</h1>
<ol>
<li>取得同版本官方安裝檔案</li>
<li>在不執行任何來源不明程式的情況下解開所有包裝 (<a href="http://legroom.net/software/uniextract">Uniextract</a>)</li>
<li>與官方版本檔案進行比對，檔案大小差異超過 1kb 請謹慎考慮</li>
<li>與官方版本檔案進行比較，檔案內容差異過大請謹慎考慮</li>
</ol>
				</p>
				<a class="read-more" href="happy-software-security-tips.html">Continue reading »</a>
			</div>
			<div class="post">
				<h1 class="post-title" href="/analysis-on-the-cryptographic-weakness-of-the-game-website.html#analysis-on-the-cryptographic-weakness-of-the-game-website">
					<a href="/analysis-on-the-cryptographic-weakness-of-the-game-website.html#analysis-on-the-cryptographic-weakness-of-the-game-website">某網站小遊戲加密弱點分析</a>
				</h1>
				<span class="post-date">一 30 3月 2015</span>
				<p>
					<h1>某網站小遊戲加密弱點分析</h1>
<p>故事是這樣的，某~~(N)~~大~~(T)~~學~~(U)~~的某系之夜弄了一個網站，上面有幾個 JS + canvas 寫的小遊戲，看到小遊戲我怎麼能夠放過不玩~~（弄）~~呢？</p>
<h2>先來看看原始 Code</h2>
<p>``` js Encode.js
function Encode_orig(t, n) {
    var i = 'abcdefghijklmnopqrstuvwxyz0123456789{:}"!@.$%,&amp;*()_+ABCDEFGHIJKLMNOPQRSTUVWXYZ?',
        o = {},
        e = i.length;
    n %= e, 0 == n &amp;&amp; (n = 2);
    for (var r = 0; e &gt; r; r++) o[i[r ...</p>
				</p>
				<a class="read-more" href="analysis-on-the-cryptographic-weakness-of-the-game-website.html">Continue reading »</a>
			</div>
			<div class="post">
				<h1 class="post-title" href="/how-does-sql-injection.html#how-does-sql-injection">
					<a href="/how-does-sql-injection.html#how-does-sql-injection">SQL Injection 是怎麼發生的</a>
				</h1>
				<span class="post-date">日 29 3月 2015</span>
				<p>
					<h1>SQL Injection 是怎麼發生的？</h1>
<p>這篇文章原本是要寫給學校的老師看的，覺得可以拿來資安科普所以就貼到 Blog 吧！</p>
<p>首先，考慮以下 PHP 程式碼</p>
<div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="k">function</span> <span class="nf">login</span><span class="p">(</span><span class="nv">$user</span><span class="p">,</span> <span class="nv">$pass</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$sql</span> <span class="o">=</span> <span class="s2">&quot;SELECT * FROM `users` WHERE `name` = &#39;</span><span class="si">$user</span><span class="s2">&#39; AND `password` = SHA1(&#39;</span><span class="si">$pass</span><span class="s2">&#39;)&quot;</span><span class="p">;</span>
    <span class="nv">$user</span> <span class="o">=</span> <span class="nx">query</span><span class="p">(</span><span class="nv">$sql</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">count</span><span class="p">(</span><span class="nv">$user</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
        <span class="k">return</span> <span class="nv">$user</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
    <span class="k">else</span>
        <span class="k">return</span> <span class="k">false</span><span class="p">;</span>
<span class="p">}</span>

<span class="nv">$user</span> <span class="o">=</span> <span class="nx">login</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;user&#39;</span><span class="p">],</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;pass&#39;</span><span class="p">]);</span>
<span class="k">if</span> <span class="p">(</span><span class="nv">$user</span> <span class="o">!==</span> <span class="k">false</span><span class="p">)</span>
    <span class="k">echo ...</span></pre></div>
				</p>
				<a class="read-more" href="how-does-sql-injection.html">Continue reading »</a>
			</div>
	</div>
	<div class="pagination">

		<span class="pagination-item older">Newer</span>

		<span class="pagination-item newer"><a href="/author/inndy2.html">Older</a></span>
	</div>
		</div>
	</body>
</html>